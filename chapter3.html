<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Розділ 3 Базові конструкції мови R: типи та структури даних. Частина 2 | Підготовка, обробка та ефективне використання даних для наукових досліджень</title>
  <meta name="description" content="Курс вступ до програмування в R, Проект DataClass" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Розділ 3 Базові конструкції мови R: типи та структури даних. Частина 2 | Підготовка, обробка та ефективне використання даних для наукових досліджень" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/cover.png" />
  <meta property="og:description" content="Курс вступ до програмування в R, Проект DataClass" />
  <meta name="github-repo" content="kleban/r-science-pub" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Розділ 3 Базові конструкції мови R: типи та структури даних. Частина 2 | Підготовка, обробка та ефективне використання даних для наукових досліджень" />
  
  <meta name="twitter:description" content="Курс вступ до програмування в R, Проект DataClass" />
  <meta name="twitter:image" content="/images/cover.png" />

<meta name="author" content="Юрій Клебан" />


<meta name="date" content="2021-07-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="chapter2.html"/>
<link rel="next" href="chapter4.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SQNMJRY3XS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SQNMJRY3XS');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a  style="margin: 7px 0 5px 0;padding:0" href="https://dataclass.org.ua" target="_blank"><img src="https://dataclass.org.ua/assets/template/images/dataclass_logo.png"></a><a href="./" style="font-weight:600; font-size:18px; padding:0">Вступ до R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Загальна інформація</a></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> Вступ до курсу</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#chapter11"><i class="fa fa-check"></i><b>1.1</b> Що таке R?</a></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#chapter12"><i class="fa fa-check"></i><b>1.2</b> Історія створення R</a></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#chapter13"><i class="fa fa-check"></i><b>1.3</b> Основи роботи з R</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="chapter1.html"><a href="chapter1.html#chapter131"><i class="fa fa-check"></i><b>1.3.1</b> R Project</a></li>
<li class="chapter" data-level="1.3.2" data-path="chapter1.html"><a href="chapter1.html#chapter132"><i class="fa fa-check"></i><b>1.3.2</b> Робота з R Studio</a></li>
<li class="chapter" data-level="1.3.3" data-path="chapter1.html"><a href="chapter1.html#chapter133"><i class="fa fa-check"></i><b>1.3.3</b> Робота з Jupyter Notebook</a></li>
<li class="chapter" data-level="1.3.4" data-path="chapter1.html"><a href="chapter1.html#chapter134"><i class="fa fa-check"></i><b>1.3.4</b> Огляд додаткових IDE та сервісів для роботи з R</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chapter1.html"><a href="chapter1.html#chapter14"><i class="fa fa-check"></i><b>1.4</b> Основи роботи з пакетами в R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="chapter1.html"><a href="chapter1.html#chapter141"><i class="fa fa-check"></i><b>1.4.1</b> Команди для роботи з пакетами</a></li>
<li class="chapter" data-level="1.4.2" data-path="chapter1.html"><a href="chapter1.html#chapter142"><i class="fa fa-check"></i><b>1.4.2</b> Робота з пакетами в RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i><b>2</b> Базові конструкції мови R: типи та структури даних. Частина 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter2.html"><a href="chapter2.html#chapter21"><i class="fa fa-check"></i><b>2.1</b> Оголошення та ініціалізація змінних</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chapter2.html"><a href="chapter2.html#chapter211"><i class="fa fa-check"></i><b>2.1.1</b> Поняття змінних та оператор присвоєння</a></li>
<li class="chapter" data-level="2.1.2" data-path="chapter2.html"><a href="chapter2.html#chapter212"><i class="fa fa-check"></i><b>2.1.2</b> Правила іменування змінних</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chapter2.html"><a href="chapter2.html#chapter22"><i class="fa fa-check"></i><b>2.2</b> Базові типи даних</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chapter2.html"><a href="chapter2.html#chapter221"><i class="fa fa-check"></i><b>2.2.1</b> Типізація в R</a></li>
<li class="chapter" data-level="2.2.2" data-path="chapter2.html"><a href="chapter2.html#chapter222"><i class="fa fa-check"></i><b>2.2.2</b> Перевірка та привдення типів даних</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chapter2.html"><a href="chapter2.html#chapter23"><i class="fa fa-check"></i><b>2.3</b> Оператори</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapter2.html"><a href="chapter2.html#chapter231"><i class="fa fa-check"></i><b>2.3.1</b> Арифметичні оператори</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter2.html"><a href="chapter2.html#chapter232"><i class="fa fa-check"></i><b>2.3.2</b> Оператори відношення</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter2.html"><a href="chapter2.html#chapter233"><i class="fa fa-check"></i><b>2.3.3</b> Логічні оператори</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapter2.html"><a href="chapter2.html#chapter24"><i class="fa fa-check"></i><b>2.4</b> Корисні математичні функції</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="chapter2.html"><a href="chapter2.html#chapter241"><i class="fa fa-check"></i><b>2.4.1</b> Заокруглення чисел (round, ceiling, floor, trunc, signif)</a></li>
<li class="chapter" data-level="2.4.2" data-path="chapter2.html"><a href="chapter2.html#chapter242"><i class="fa fa-check"></i><b>2.4.2</b> Послідовності чисел (seq, rep)</a></li>
<li class="chapter" data-level="2.4.3" data-path="chapter2.html"><a href="chapter2.html#chapter243"><i class="fa fa-check"></i><b>2.4.3</b> Генерація псевдовипадкових чисел</a></li>
<li class="chapter" data-level="2.4.4" data-path="chapter2.html"><a href="chapter2.html#chapter244"><i class="fa fa-check"></i><b>2.4.4</b> Інші математичні функції та константи R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chapter2.html"><a href="chapter2.html#chapter245"><i class="fa fa-check"></i><b>2.5</b> Введення-виведння даних</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> Базові конструкції мови R: типи та структури даних. Частина 2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#chapter31"><i class="fa fa-check"></i><b>3.1</b> Набори даних</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#chapter32"><i class="fa fa-check"></i><b>3.2</b> Вектори (vectors)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="chapter3.html"><a href="chapter3.html#chapter321"><i class="fa fa-check"></i><b>3.2.1</b> Поняття та спосіб представлення</a></li>
<li class="chapter" data-level="3.2.2" data-path="chapter3.html"><a href="chapter3.html#chapter322"><i class="fa fa-check"></i><b>3.2.2</b> Оголошення векторів</a></li>
<li class="chapter" data-level="3.2.3" data-path="chapter3.html"><a href="chapter3.html#chapter323"><i class="fa fa-check"></i><b>3.2.3</b> Операції над векторами</a></li>
<li class="chapter" data-level="3.2.4" data-path="chapter3.html"><a href="chapter3.html#naming-vector-elements"><i class="fa fa-check"></i><b>3.2.4</b> Naming vector elements</a></li>
<li class="chapter" data-level="3.2.5" data-path="chapter3.html"><a href="chapter3.html#access-to-vector-elements"><i class="fa fa-check"></i><b>3.2.5</b> Access to vector elements</a></li>
<li class="chapter" data-level="3.2.6" data-path="chapter3.html"><a href="chapter3.html#useful-functions"><i class="fa fa-check"></i><b>3.2.6</b> Useful functions</a></li>
<li class="chapter" data-level="3.2.7" data-path="chapter3.html"><a href="chapter3.html#correction-of-data-na-nan-inf"><i class="fa fa-check"></i><b>3.2.7</b> Correction of data (NA, NaN, Inf)</a></li>
<li class="chapter" data-level="3.2.8" data-path="chapter3.html"><a href="chapter3.html#tasks"><i class="fa fa-check"></i><b>3.2.8</b> Tasks</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#matrices"><i class="fa fa-check"></i><b>3.3</b> Matrices</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="chapter3.html"><a href="chapter3.html#creating-matrices"><i class="fa fa-check"></i><b>3.3.1</b> Creating matrices</a></li>
<li class="chapter" data-level="3.3.2" data-path="chapter3.html"><a href="chapter3.html#naming-matrices"><i class="fa fa-check"></i><b>3.3.2</b> Naming matrices</a></li>
<li class="chapter" data-level="3.3.3" data-path="chapter3.html"><a href="chapter3.html#access-to-matrix-elements"><i class="fa fa-check"></i><b>3.3.3</b> Access to matrix elements</a></li>
<li class="chapter" data-level="3.3.4" data-path="chapter3.html"><a href="chapter3.html#useful-functions-1"><i class="fa fa-check"></i><b>3.3.4</b> Useful functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#factors"><i class="fa fa-check"></i><b>3.4</b> Factors</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#dataframes"><i class="fa fa-check"></i><b>3.5</b> Dataframes</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="chapter3.html"><a href="chapter3.html#creating-data-frames"><i class="fa fa-check"></i><b>3.5.1</b> Creating Data Frames</a></li>
<li class="chapter" data-level="3.5.2" data-path="chapter3.html"><a href="chapter3.html#extending-data-frames"><i class="fa fa-check"></i><b>3.5.2</b> Extending data frames</a></li>
<li class="chapter" data-level="3.5.3" data-path="chapter3.html"><a href="chapter3.html#merge-df"><i class="fa fa-check"></i><b>3.5.3</b> Merge DF</a></li>
<li class="chapter" data-level="3.5.4" data-path="chapter3.html"><a href="chapter3.html#subsetting-data-frames"><i class="fa fa-check"></i><b>3.5.4</b> Subsetting Data Frames</a></li>
<li class="chapter" data-level="3.5.5" data-path="chapter3.html"><a href="chapter3.html#order-data.frame"><i class="fa fa-check"></i><b>3.5.5</b> Order data.frame</a></li>
<li class="chapter" data-level="3.5.6" data-path="chapter3.html"><a href="chapter3.html#manipulating-data.frames"><i class="fa fa-check"></i><b>3.5.6</b> Manipulating data.frames</a></li>
<li class="chapter" data-level="3.5.7" data-path="chapter3.html"><a href="chapter3.html#tasks-on-data.frames"><i class="fa fa-check"></i><b>3.5.7</b> Tasks on data.frames</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#lists"><i class="fa fa-check"></i><b>3.6</b> Lists</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="chapter3.html"><a href="chapter3.html#creating-a-list"><i class="fa fa-check"></i><b>3.6.1</b> Creating a List</a></li>
<li class="chapter" data-level="3.6.2" data-path="chapter3.html"><a href="chapter3.html#naming-list-elements"><i class="fa fa-check"></i><b>3.6.2</b> Naming List Elements</a></li>
<li class="chapter" data-level="3.6.3" data-path="chapter3.html"><a href="chapter3.html#accessing-list-elements"><i class="fa fa-check"></i><b>3.6.3</b> Accessing List Elements</a></li>
<li class="chapter" data-level="3.6.4" data-path="chapter3.html"><a href="chapter3.html#manipulating-list-elements"><i class="fa fa-check"></i><b>3.6.4</b> Manipulating List Elements</a></li>
<li class="chapter" data-level="3.6.5" data-path="chapter3.html"><a href="chapter3.html#tasks-1"><i class="fa fa-check"></i><b>3.6.5</b> TASKS</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="chapter3.html"><a href="chapter3.html#apply-functions-family"><i class="fa fa-check"></i><b>3.7</b> Apply functions family</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="chapter3.html"><a href="chapter3.html#the-apply-functions-family"><i class="fa fa-check"></i><b>3.7.1</b> The apply() functions family</a></li>
<li class="chapter" data-level="3.7.2" data-path="chapter3.html"><a href="chapter3.html#apply"><i class="fa fa-check"></i><b>3.7.2</b> apply()</a></li>
<li class="chapter" data-level="3.7.3" data-path="chapter3.html"><a href="chapter3.html#lapply"><i class="fa fa-check"></i><b>3.7.3</b> lapply()</a></li>
<li class="chapter" data-level="3.7.4" data-path="chapter3.html"><a href="chapter3.html#sapplay"><i class="fa fa-check"></i><b>3.7.4</b> sapplay()</a></li>
<li class="chapter" data-level="3.7.5" data-path="chapter3.html"><a href="chapter3.html#aggregate"><i class="fa fa-check"></i><b>3.7.5</b> aggregate()</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="chapter3.html"><a href="chapter3.html#references"><i class="fa fa-check"></i><b>3.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter4.html"><a href="chapter4.html"><i class="fa fa-check"></i><b>4</b> Збір та читання інформації з різноманітних джерел: файли, веб-сторінки, бази R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter4.html"><a href="chapter4.html#chapter41"><i class="fa fa-check"></i><b>4.1</b> Загальний опис структури даних</a></li>
<li class="chapter" data-level="4.2" data-path="chapter4.html"><a href="chapter4.html#chapter42"><i class="fa fa-check"></i><b>4.2</b> Опис набору даних <code>Telecom Users</code></a></li>
<li class="chapter" data-level="4.3" data-path="chapter3.html"><a href="chapter3.html#chapter321"><i class="fa fa-check"></i><b>4.3</b> Імпорт даних засобами RStudio</a></li>
<li class="chapter" data-level="4.4" data-path="chapter4.html"><a href="chapter4.html#chapter43"><i class="fa fa-check"></i><b>4.4</b> CSV-файли: читання, запис</a></li>
<li class="chapter" data-level="4.5" data-path="chapter4.html"><a href="chapter4.html#chapter44"><i class="fa fa-check"></i><b>4.5</b> Excel (xlsx): читання, запис</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="chapter4.html"><a href="chapter4.html#chapter441"><i class="fa fa-check"></i><b>4.5.1</b> Task 2.1</a></li>
<li class="chapter" data-level="4.5.2" data-path="chapter4.html"><a href="chapter4.html#chapter442"><i class="fa fa-check"></i><b>4.5.2</b> Solution for Task 2.1</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="chapter4.html"><a href="chapter4.html#chapter45"><i class="fa fa-check"></i><b>4.6</b> XML: читання, запис</a></li>
<li class="chapter" data-level="4.7" data-path="chapter4.html"><a href="chapter4.html#chapter46"><i class="fa fa-check"></i><b>4.7</b> JSON and API</a></li>
<li class="chapter" data-level="4.8" data-path="chapter4.html"><a href="chapter4.html#chapter46"><i class="fa fa-check"></i><b>4.8</b> Google Services</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="chapter4.html"><a href="chapter4.html#chapter461"><i class="fa fa-check"></i><b>4.8.1</b> Spreadsheets</a></li>
<li class="chapter" data-level="4.8.2" data-path="chapter4.html"><a href="chapter4.html#chapter462"><i class="fa fa-check"></i><b>4.8.2</b> Trends</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="chapter4.html"><a href="chapter4.html#chapter47"><i class="fa fa-check"></i><b>4.9</b> SQL (SQLite sample)</a></li>
<li class="chapter" data-level="4.10" data-path="chapter4.html"><a href="chapter4.html#web-pages-html"><i class="fa fa-check"></i><b>4.10</b> Web-pages (HTML)</a></li>
<li class="chapter" data-level="4.11" data-path="chapter4.html"><a href="chapter4.html#references-1"><i class="fa fa-check"></i><b>4.11</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter5.html"><a href="chapter5.html"><i class="fa fa-check"></i><b>5</b> Прийоми маніпулювання даними (з використанням можливостей бібліотеки dplyr)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter5.html"><a href="chapter5.html#whats-dplyr"><i class="fa fa-check"></i><b>5.1</b> What’s dplyr</a></li>
<li class="chapter" data-level="5.2" data-path="chapter5.html"><a href="chapter5.html#exploring-data-with-dplyr"><i class="fa fa-check"></i><b>5.2</b> Exploring data with dplyr</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chapter5.html"><a href="chapter5.html#funtions-and-dataset-explore"><i class="fa fa-check"></i><b>5.2.1</b> Funtions and dataset explore</a></li>
<li class="chapter" data-level="5.2.2" data-path="chapter5.html"><a href="chapter5.html#filter-function"><i class="fa fa-check"></i><b>5.2.2</b> filter() function</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chapter5.html"><a href="chapter5.html#pipe-operator"><i class="fa fa-check"></i><b>5.3</b> Pipe (%&gt;%) operator</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="chapter5.html"><a href="chapter5.html#select-function"><i class="fa fa-check"></i><b>5.3.1</b> select() function</a></li>
<li class="chapter" data-level="5.3.2" data-path="chapter5.html"><a href="chapter5.html#subset-rows-using-their-positions-with-slice"><i class="fa fa-check"></i><b>5.3.2</b> Subset rows using their positions with slice()</a></li>
<li class="chapter" data-level="5.3.3" data-path="chapter5.html"><a href="chapter5.html#sorting-with-arrange"><i class="fa fa-check"></i><b>5.3.3</b> Sorting with arrange()</a></li>
<li class="chapter" data-level="5.3.4" data-path="chapter5.html"><a href="chapter5.html#create-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.3.4</b> Create new variables with mutate()</a></li>
<li class="chapter" data-level="5.3.5" data-path="chapter5.html"><a href="chapter5.html#renaming-columns-with-rename"><i class="fa fa-check"></i><b>5.3.5</b> Renaming columns with rename()</a></li>
<li class="chapter" data-level="5.3.6" data-path="chapter5.html"><a href="chapter5.html#calculations-with-group_by-summarise"><i class="fa fa-check"></i><b>5.3.6</b> Calculations with group_by() + summarise()</a></li>
<li class="chapter" data-level="5.3.7" data-path="chapter5.html"><a href="chapter5.html#task-on-credits"><i class="fa fa-check"></i><b>5.3.7</b> Task on Credits</a></li>
<li class="chapter" data-level="5.3.8" data-path="chapter5.html"><a href="chapter5.html#binding-rows-and-columns"><i class="fa fa-check"></i><b>5.3.8</b> Binding rows and columns</a></li>
<li class="chapter" data-level="5.3.9" data-path="chapter5.html"><a href="chapter5.html#joining-data"><i class="fa fa-check"></i><b>5.3.9</b> Join()ing data</a></li>
<li class="chapter" data-level="5.3.10" data-path="chapter5.html"><a href="chapter5.html#data-cleaning-with-gather"><i class="fa fa-check"></i><b>5.3.10</b> Data cleaning with gather()</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="chapter5.html"><a href="chapter5.html#refences"><i class="fa fa-check"></i><b>5.4</b> Refences</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapter8.html"><a href="chapter8.html"><i class="fa fa-check"></i><b>6</b> Представлення результатів аналізу даних.</a></li>
<li class="chapter" data-level="7" data-path="chapter7.html"><a href="chapter7.html"><i class="fa fa-check"></i><b>7</b> Побудова та навчання математичних моделей, метрики оцінки їх якості.</a></li>
<li class="chapter" data-level="8" data-path="chapter6.html"><a href="chapter6.html"><i class="fa fa-check"></i><b>8</b> Приклади задач та їх розв’язки</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapter6.html"><a href="chapter6.html#chapter61"><i class="fa fa-check"></i><b>8.1</b> Задачі</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="chapter6.html"><a href="chapter6.html#chapter611"><i class="fa fa-check"></i><b>8.1.1</b> Послідовності</a></li>
<li class="chapter" data-level="8.1.2" data-path="chapter6.html"><a href="chapter6.html#chapter612"><i class="fa fa-check"></i><b>8.1.2</b> Функції</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="chapter6.html"><a href="chapter6.html#chapter62"><i class="fa fa-check"></i><b>8.2</b> Рішення задач</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="chapter6.html"><a href="chapter6.html#chapter621"><i class="fa fa-check"></i><b>8.2.1</b> Послідовності та вектори</a></li>
<li class="chapter" data-level="8.2.2" data-path="chapter6.html"><a href="chapter6.html#chapter622"><i class="fa fa-check"></i><b>8.2.2</b> Функції</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="-e-.html"><a href="-e-.html"><i class="fa fa-check"></i>Джeрела</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Створено з bookdown</a></li>
<li><a href="https://dataclass.org.ua" target="blank">Сайт проекту DataCalss</a></li>  
<li><a href="https://github.com/kleban/r-intro-pub/issues" style="color:#e53b49" target="blank"><i class="fas fa-bug"></i> Знайшли помилку?</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Підготовка, обробка та ефективне використання даних для наукових досліджень</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter3" class="section level1" number="3">
<h1><span class="header-section-number">Розділ 3</span> Базові конструкції мови R: типи та структури даних. Частина 2</h1>
<p>Автори: Новоселецький Олександр, Юрій Клебан</p>
<hr />
<div id="chapter31" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Набори даних</h2>
<div class="alert alert-danger">
<p><i class="fa-2x fas fa-alert fa-battery-quarter"></i>
Матеріали розділу у процесі підготовки.</p>
</div>
</div>
<div id="chapter32" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Вектори (vectors)</h2>
<div id="chapter321" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Поняття та спосіб представлення</h3>
<p>Вектори є найпростішим способом представлення колекції даних. З своїм змістом <strong>вектор</strong> - це послідовність однорідних елементів. Якщо ж говорити про мову програмування, то <strong>вектор</strong> - це послідовність елементів одного типу, що розміщені за деяким порядком (індексом).</p>
<p>Вектор прийнято позначати, як x = (x1, x2,…, xn), де х - назва вектора, n - кількість елементів вектора,</p>
</div>
<div id="chapter322" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Оголошення векторів</h3>
<p>Вектор - базовий тип даних у <code>R</code>, що дозволяє записати колекцію елементів одного типу за допомогою <code>c()</code> або без нього, якщо це послідовність значень.</p>
<p><em>Примітка. По суті функція <code>c()</code> дозволяє об’єднати кілька векторів.</em></p>
<p>Розглянемо для прикладу звичайну змінну <code>x</code>:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="chapter3.html#cb145-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span></code></pre></div>
<p>По своїй суті <code>x</code> у даному випадку є вектором, що складається з одного значення <code>10</code>. Ми можемо також записати кілька елементів у змінну <code>x</code>:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="chapter3.html#cb146-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="fl">2.5</span>, <span class="dv">3</span>)</span>
<span id="cb146-2"><a href="chapter3.html#cb146-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1.0 2.0 2.5 3.0</code></pre>
<p>Елементами вектора можуть бути значення будь якого типу: <code>numeric</code>, <code>character</code>, <code>logical</code> тощо:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="chapter3.html#cb148-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb148-2"><a href="chapter3.html#cb148-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(T, F, F, T, F)</span>
<span id="cb148-3"><a href="chapter3.html#cb148-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;my&quot;</span>, <span class="st">&quot;friend&quot;</span>, <span class="st">&quot;!&quot;</span>)</span></code></pre></div>
<p>Елементами вектора також послідовності, створені на за допомогою функцій <code>rep()</code>, <code>seq()</code> та оператора <code>:</code>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="chapter3.html#cb149-1" aria-hidden="true" tabindex="-1"></a>vtr <span class="ot">&lt;-</span>  <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb149-2"><a href="chapter3.html#cb149-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1] 2 3 4 5 6 7</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="chapter3.html#cb151-1" aria-hidden="true" tabindex="-1"></a>vtr <span class="ot">&lt;-</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb151-2"><a href="chapter3.html#cb151-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1] 7 6 5 4 3 2</code></pre>
<p>Якщо є потреба об’єднати кілька векторів, скористайтеся функцією <code>c()</code>:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="chapter3.html#cb153-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb153-2"><a href="chapter3.html#cb153-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">9</span>)</span>
<span id="cb153-3"><a href="chapter3.html#cb153-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(x, y, <span class="dv">10</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">100</span>)</span>
<span id="cb153-4"><a href="chapter3.html#cb153-4" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1]   2   3   4   6   9  10  11  12 100</code></pre>
<p>Переглянути коротку описову статистику по вектору можна за допомогою функції <strong><code>summary()</code></strong>:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="chapter3.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(z)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.00    4.00    9.00   17.44   11.00  100.00</code></pre>
</div>
<div id="chapter323" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Операції над векторами</h3>
<p>The advantage of using vectors over writing each value in a separate variable is the ability to perform 1 operation on all elements of the vector or on several vectors simultaneously, for example, arithmetic operations of addition or multiplication.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="chapter3.html#cb157-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb157-2"><a href="chapter3.html#cb157-2" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="chapter3.html#cb159-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">*</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] 10 30 50</code></pre>
<p>From the example described above, it can be understood that the addition operation is essentially a super element sum of vectors when the 1st element of the vector v1 is added to the 1st element of the <span class="math inline">\(vector2(1 + 2)\)</span> and so on. Thus, the resulting vector will have the same length as the vectors <span class="math inline">\(v1\)</span> and <span class="math inline">\(v2\)</span>.</p>
<p>However, there may be a situation when one of the vectors has a shorter length or even consists of 1 element:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="chapter3.html#cb161-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb161-2"><a href="chapter3.html#cb161-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb161-3"><a href="chapter3.html#cb161-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> v2</span></code></pre></div>
<pre><code>## [1]  3  7  7 11</code></pre>
<p>In this case, the number 2 will be added to each element of the vectorv1. In fact, this means that the vector v2 will look like c 2, 2), ie there will be a duplication of values to the length of the vectorv1 and then perform the operation of adding elements. Thus, the resulting vector will have the length of the longest of the vectors.</p>
<p>Consider a more complex case where there are vectors with different numbers of elements other than 1:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="chapter3.html#cb163-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb163-2"><a href="chapter3.html#cb163-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb163-3"><a href="chapter3.html#cb163-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb163-4"><a href="chapter3.html#cb163-4" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> v2 <span class="sc">+</span> v3</span></code></pre></div>
<pre><code>## Warning in v1 + v2 + v3: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>## [1]  7 16 17 11</code></pre>
<p>To begin with, it should be noted that the interpreter warns that the lengths of the vectors are not multiples (if they were vectors of length 2, 4, 8, then there would be no warning).</p>
<p>If you extend each vector to the length of the maximum of them, repeating the elements cyclically, you get a set (marked added elements):</p>
<pre><code>v1 &lt;- c(2, 3,*2,*3)
v2 &lt;- c(4, 5, 6, 7)
v3 &lt;- c(1, 8, 9,*1)</code></pre>
<p>Subtraction (<code>-</code>), division(<code>/</code>) and multiplication (<code>*</code>) operations are performed similarly.</p>
<p>The relation operators and logical operators also act element by element with respect to the vector, but the result is a collection (vector) of values of the logical type logical with the values <code>TRUE/FALSE</code>.</p>
<p>Consider an example of finding all elements of the array <span class="math inline">\(v1\)</span> that are greater than the corresponding index elements of the array <span class="math inline">\(v2\)</span>:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="chapter3.html#cb167-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">12</span>)</span>
<span id="cb167-2"><a href="chapter3.html#cb167-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">1</span>)</span>
<span id="cb167-3"><a href="chapter3.html#cb167-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">&gt;</span> v2</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<p>In essence, as a result of execution there is a comparison of each element of both vectors among themselves: <code>2&gt;6</code>, <code>4&gt;4</code>, <code>7&gt;6</code>, <code>9&gt;7</code>, <code>12&gt;1</code>.</p>
<p>Therefore, the previously studied operators (<code>arithmetic</code>, <code>logical</code>, <code>relations</code>) can be used to work with vectors as well.</p>
</div>
<div id="naming-vector-elements" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Naming vector elements</h3>
<p>In order to understand what vectors mean and what data is often described, analysts need to sign this data.</p>
<p>We will write down information about daily visits to the site by users during the week in the following way:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="chapter3.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of unique bank branch visits from Monday to Sunday</span></span>
<span id="cb169-2"><a href="chapter3.html#cb169-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1245</span>, <span class="dv">2112</span>, <span class="dv">1321</span>, <span class="dv">1231</span>, <span class="dv">2342</span>, <span class="dv">1718</span>, <span class="dv">1980</span>)</span></code></pre></div>
<p>Next, assign values to the days of the week using the <code>names()</code> function:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="chapter3.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>, <span class="st">&quot;Thursday&quot;</span>, <span class="st">&quot;Friday&quot;</span>, <span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>)</span>
<span id="cb170-2"><a href="chapter3.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(data)</span></code></pre></div>
<pre><code>##    Monday   Tuesday Wednesday  Thursday    Friday  Saturday    Sunday 
##      1245      2112      1321      1231      2342      1718      1980</code></pre>
<p>Otherwise, this code could be written as follows:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="chapter3.html#cb172-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1245</span>, <span class="dv">2112</span>, <span class="dv">1321</span>, <span class="dv">1231</span>, <span class="dv">2342</span>, <span class="dv">1718</span>, <span class="dv">1980</span>)</span>
<span id="cb172-2"><a href="chapter3.html#cb172-2" aria-hidden="true" tabindex="-1"></a>days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>, <span class="st">&quot;Thursday&quot;</span>, <span class="st">&quot;Friday&quot;</span>, <span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>)</span>
<span id="cb172-3"><a href="chapter3.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data) <span class="ot">&lt;-</span> days</span>
<span id="cb172-4"><a href="chapter3.html#cb172-4" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>##    Monday   Tuesday Wednesday  Thursday    Friday  Saturday    Sunday 
##      1245      2112      1321      1231      2342      1718      1980</code></pre>
<p>If we need to get information, for example, about the name of the 4th element of the vector, we can use the code:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="chapter3.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span></code></pre></div>
<pre><code>## [1] &quot;Monday&quot;    &quot;Tuesday&quot;   &quot;Wednesday&quot; &quot;Thursday&quot;  &quot;Friday&quot;    &quot;Saturday&quot; 
## [7] &quot;Sunday&quot;</code></pre>
<p>The <code>names()</code> function allows not only to set the values of names for vector elements, but also to obtain information about them.</p>
<hr />
</div>
<div id="access-to-vector-elements" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Access to vector elements</h3>
<p>Indexing of elements inside the wind occurs from 1 ton, where n is the number of elements of the vector.</p>
<p><em>Note. In R, the indexing of array, vector, and all other collection types begins with 1, not with 0.</em></p>
<p>Consider the previous example:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="chapter3.html#cb176-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1245</span>, <span class="dv">2112</span>, <span class="dv">1321</span>, <span class="dv">1231</span>, <span class="dv">2342</span>, <span class="dv">1718</span>, <span class="dv">1980</span>)</span>
<span id="cb176-2"><a href="chapter3.html#cb176-2" aria-hidden="true" tabindex="-1"></a>days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>, <span class="st">&quot;Thursday&quot;</span>, <span class="st">&quot;Friday&quot;</span>, <span class="st">&quot;Saturday&quot;</span>, <span class="st">&quot;Sunday&quot;</span>)</span>
<span id="cb176-3"><a href="chapter3.html#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data) <span class="ot">&lt;-</span> days</span></code></pre></div>
<p>In order to record information only about site visitors on Wednesday, you need to use the operator <code>[]</code> and specify the index of the element in the array:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="chapter3.html#cb177-1" aria-hidden="true" tabindex="-1"></a>data[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## Wednesday 
##      1321</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="chapter3.html#cb179-1" aria-hidden="true" tabindex="-1"></a>data[<span class="fu">names</span>(data) <span class="sc">==</span> <span class="st">&#39;Wednesday&#39;</span>]</span></code></pre></div>
<pre><code>## Wednesday 
##      1321</code></pre>
<p>If there is a need to get several elements of the vector that are out of order, you can do it like this:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="chapter3.html#cb181-1" aria-hidden="true" tabindex="-1"></a>some_days <span class="ot">&lt;-</span> data[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)]</span>
<span id="cb181-2"><a href="chapter3.html#cb181-2" aria-hidden="true" tabindex="-1"></a>some_days</span></code></pre></div>
<pre><code>##  Monday Tuesday  Friday 
##    1245    2112    2342</code></pre>
<p>From the example above it is clear that the indices of the vector data are another vector <code>c(1, 2, 5)</code>, so it can be declared as a separate variable:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="chapter3.html#cb183-1" aria-hidden="true" tabindex="-1"></a>indexes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb183-2"><a href="chapter3.html#cb183-2" aria-hidden="true" tabindex="-1"></a>some_days <span class="ot">&lt;-</span> data[indexes]</span>
<span id="cb183-3"><a href="chapter3.html#cb183-3" aria-hidden="true" tabindex="-1"></a>some_days</span></code></pre></div>
<pre><code>##  Monday Tuesday  Friday 
##    1245    2112    2342</code></pre>
<p>If there is a need to obtain information about several elements that are placed in a row, then for convenience (and in the case when such an array consists, for example, of 1000+ elements) use the operator :, for example:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="chapter3.html#cb185-1" aria-hidden="true" tabindex="-1"></a>working_days <span class="ot">&lt;-</span> data[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb185-2"><a href="chapter3.html#cb185-2" aria-hidden="true" tabindex="-1"></a>working_days</span></code></pre></div>
<pre><code>##    Monday   Tuesday Wednesday  Thursday    Friday 
##      1245      2112      1321      1231      2342</code></pre>
<p>Thus, all working days of the week are selected for the working_days vector.</p>
<hr />
</div>
<div id="useful-functions" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Useful functions</h3>
<p>Let’s take a look at some useful features that will simplify working with vectors. For further calculations we will use two vectors A andB:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="chapter3.html#cb187-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb187-2"><a href="chapter3.html#cb187-2" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb187-3"><a href="chapter3.html#cb187-3" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>## [1] 3 5 8 2 5 4 2</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="chapter3.html#cb189-1" aria-hidden="true" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>## [1]  3 NA  1 NA  6  4  5</code></pre>
<p>Function sum(). This function is used to find the sum of the elements of the collection:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="chapter3.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(A)</span></code></pre></div>
<pre><code>## [1] 29</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="chapter3.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(B)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>An interesting point is that in the presence of gaps in the data (value NA) the calculation of the amount is impossible. In this case, the functions can take the additional parameter na.rm = T, whereT is an abbreviation of TRUE, which indicates the need to remove gaps in the data before performing the operation</p>
<p><em>Note. You should check the documentation for such a parameter in the function. If it is not present, then it is necessary to carry out cleaning in other ways before work with the data.</em></p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="chapter3.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(B, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>The mean () function is used to find the arithmetic mean of numbers:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="chapter3.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(A)</span></code></pre></div>
<pre><code>## [1] 4.142857</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="chapter3.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(B, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 3.8</code></pre>
<p>min() and max() functions allow you to find the minimum and maximum values, respectively:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="chapter3.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(A)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="chapter3.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(A)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Also to work in R there is a large number of built-in implemented functions to perform statistical, econometric and other research in the field of economics and beyond. Try the sd(), cov(), cor() functions.</p>
<p>The length () function helps to determine the “length” of a vector, ie the number of elements:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="chapter3.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(A)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="chapter3.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(B)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>The unique () function identifies unique elements in an array:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="chapter3.html#cb209-1" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>## [1] 3 5 8 2 5 4 2</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="chapter3.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(A)</span></code></pre></div>
<pre><code>## [1] 3 5 8 2 4</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="chapter3.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;---&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;---&quot;</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="chapter3.html#cb215-1" aria-hidden="true" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>## [1]  3 NA  1 NA  6  4  5</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="chapter3.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(B)</span></code></pre></div>
<pre><code>## [1]  3 NA  1  6  4  5</code></pre>
<p>The intersect() function allows you to find common elements of two vectors, so for vectors A andB common values are 3, 4 and5:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="chapter3.html#cb219-1" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>## [1] 3 5 8 2 5 4 2</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="chapter3.html#cb221-1" aria-hidden="true" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>## [1]  3 NA  1 NA  6  4  5</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="chapter3.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(A, B)</span></code></pre></div>
<pre><code>## [1] 3 5 4</code></pre>
<p>Conversely, The union() function allows you to combine elements of both sets / vectors:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="chapter3.html#cb225-1" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>## [1] 3 5 8 2 5 4 2</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="chapter3.html#cb227-1" aria-hidden="true" tabindex="-1"></a>B</span></code></pre></div>
<pre><code>## [1]  3 NA  1 NA  6  4  5</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="chapter3.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(A, B)</span></code></pre></div>
<pre><code>## [1]  3  5  8  2  4 NA  1  6</code></pre>
<p>Try to understand the operation of the functions setdiff(), setequal(), is.element().</p>
<p>_I recommend reading the short materials here: <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/sets.html._" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/base/html/sets.html._</a></p>
<hr />
</div>
<div id="correction-of-data-na-nan-inf" class="section level3" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> Correction of data (NA, NaN, Inf)</h3>
<p>In the process of working with data there are problems associated with the correctness of their reading, conversion and operations on them. For example, an incorrect entry in the field of integer type " +10 " instead of 10 may result in conversion toNaN or division by 0 toInf.</p>
<p>Before using numerical and other data, the stage of cleaning and replacement of values is usually performed depending on the tasks of programming / research. In R the following types of the missed values are possible:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
NA ** - Not Available.</li>
<li><input type="checkbox" disabled="" checked="" />
NaN ** - Not a Number.</li>
<li><input type="checkbox" disabled="" checked="" />
Inf ** - Infinity (infinity, can be with the sign+and-).</li>
</ul>
<p>Let’s start with vector:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="chapter3.html#cb231-1" aria-hidden="true" tabindex="-1"></a>vtr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NaN</span>, <span class="cn">Inf</span>, <span class="dv">1223</span>, <span class="sc">-</span><span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="dv">21</span>) </span>
<span id="cb231-2"><a href="chapter3.html#cb231-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2   NA  NaN  Inf 1223 -Inf   NA   21</code></pre>
<p>You can check a single value for a space with the functions is.na(), is.nan(), is.infinite(), is.finite().</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="chapter3.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(vtr)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="chapter3.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nan</span>(vtr)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="chapter3.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.infinite</span>(vtr)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="chapter3.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.finite</span>(vtr) <span class="co"># if infinite == TRUE =&gt; finite == FALSE :)</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<p>Then replacement of values can be executed as follows (we will replace all NA and Nan with 1000):</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="chapter3.html#cb241-1" aria-hidden="true" tabindex="-1"></a>vtr[<span class="fu">is.na</span>(vtr)] <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb241-2"><a href="chapter3.html#cb241-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2 1000 1000  Inf 1223 -Inf 1000   21</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="chapter3.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Nan also replaced with is.na()!!!</span></span></code></pre></div>
<p>And then replace Inf with the maximum value in the vector, and -Inf with the minimum:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="chapter3.html#cb244-1" aria-hidden="true" tabindex="-1"></a>vtr[<span class="fu">is.nan</span>(vtr)] <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb244-2"><a href="chapter3.html#cb244-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2 1000 1000  Inf 1223 -Inf 1000   21</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="chapter3.html#cb246-1" aria-hidden="true" tabindex="-1"></a>vtr[<span class="fu">is.na</span>(vtr)] <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb246-2"><a href="chapter3.html#cb246-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2 1000 1000  Inf 1223 -Inf 1000   21</code></pre>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="chapter3.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Nan also replaced with is.na()!!!</span></span></code></pre></div>
<p>And then replace Inf with the maximum value in the vector, and -Inf with the minimum:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="chapter3.html#cb249-1" aria-hidden="true" tabindex="-1"></a>vtr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NaN</span>, <span class="cn">Inf</span>, <span class="dv">1223</span>, <span class="sc">-</span><span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="dv">21</span>) </span>
<span id="cb249-2"><a href="chapter3.html#cb249-2" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2   NA  NaN  Inf 1223 -Inf   NA   21</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="chapter3.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.infinite</span>(vtr)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="chapter3.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.infinite</span>(vtr)</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="chapter3.html#cb255-1" aria-hidden="true" tabindex="-1"></a>vtr[<span class="sc">!</span><span class="fu">is.infinite</span>(vtr)]</span></code></pre></div>
<pre><code>## [1]    1   -2   NA  NaN 1223   NA   21</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="chapter3.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vtr[<span class="sc">!</span><span class="fu">is.infinite</span>(vtr)], <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 1223</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="chapter3.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vtr, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="chapter3.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(vtr, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] -Inf</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="chapter3.html#cb263-1" aria-hidden="true" tabindex="-1"></a>vtr[vtr <span class="sc">==</span> <span class="cn">Inf</span>] <span class="ot">&lt;-</span> <span class="fu">max</span>(vtr)</span>
<span id="cb263-2"><a href="chapter3.html#cb263-2" aria-hidden="true" tabindex="-1"></a>vtr[vtr <span class="sc">==</span> <span class="sc">-</span><span class="cn">Inf</span>] <span class="ot">&lt;-</span> <span class="fu">min</span>(vtr)</span>
<span id="cb263-3"><a href="chapter3.html#cb263-3" aria-hidden="true" tabindex="-1"></a>vtr</span></code></pre></div>
<pre><code>## [1]    1   -2   NA  NaN   NA 1223   NA   NA   21</code></pre>
<p>If you want to replace the value in Inf regardless of the sign, you can useis.infinite().</p>
<hr />
</div>
<div id="tasks" class="section level3" number="3.2.8">
<h3><span class="header-section-number">3.2.8</span> Tasks</h3>
<p><em>Task 1</em></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
Create vector of 10 random number in range <span class="math inline">\([10;100]\)</span></li>
<li><input type="checkbox" disabled="" checked="" />
Replace all odd numbers with NA</li>
<li><input type="checkbox" disabled="" checked="" />
Replace all NA with average value</li>
</ul>
<p><em>Solution</em></p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="chapter3.html#cb265-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">10</span>)</span>
<span id="cb265-2"><a href="chapter3.html#cb265-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 76 73  7 59 15 93 99 40 42 55</code></pre>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="chapter3.html#cb267-1" aria-hidden="true" tabindex="-1"></a>x[x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb267-2"><a href="chapter3.html#cb267-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 76 NA NA NA NA NA NA 40 42 NA</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="chapter3.html#cb269-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> T)</span>
<span id="cb269-2"><a href="chapter3.html#cb269-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1] 76.00000 52.66667 52.66667 52.66667 52.66667 52.66667 52.66667 40.00000
##  [9] 42.00000 52.66667</code></pre>
<hr />
</div>
</div>
<div id="matrices" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Matrices</h2>
<div id="creating-matrices" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Creating matrices</h3>
<p>Matrix - a collection of elements of the same type (numeric,character, logical) with a fixed set of rows and columns. In the case where the matrix has only rows and columns, it is a two-dimensional data array.</p>
<p>The matrix is created using the matrix() function:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="chapter3.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    6    7    8    9   10</code></pre>
<p>where <code>1:10</code> - a set of elements of the matrix, it can also be a pre-formed vector (entered, by calculation, from a file, etc.), <code>byrow = TRUE</code> - means that the elements in the matrix will be written in rows, so in the pedestrian line contains the value <code>1:5</code>, and the second <code>6:10</code> (if we need to write information on the lines then we should use <code>byrow = FASLE</code>), <code>nrow</code> - the number of rows of the matrix.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="chapter3.html#cb273-1" aria-hidden="true" tabindex="-1"></a>sales1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">15</span>)</span>
<span id="cb273-2"><a href="chapter3.html#cb273-2" aria-hidden="true" tabindex="-1"></a>sales2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">15</span>, <span class="dv">21</span>)</span>
<span id="cb273-3"><a href="chapter3.html#cb273-3" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">c</span>(sales1, sales2)</span>
<span id="cb273-4"><a href="chapter3.html#cb273-4" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(sales, <span class="at">byrow=</span> T, <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb273-5"><a href="chapter3.html#cb273-5" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   12   14   15
## [2,]   22   15   21</code></pre>
<hr />
</div>
<div id="naming-matrices" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Naming matrices</h3>
<p>To specify the names of rows and columns of the matrix, use the functions rownames() and colnames():</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="chapter3.html#cb275-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb275-2"><a href="chapter3.html#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;row1&quot;</span>, <span class="st">&quot;row2&quot;</span>, <span class="st">&quot;row3&quot;</span>)</span>
<span id="cb275-3"><a href="chapter3.html#cb275-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>, <span class="st">&quot;c3&quot;</span>)</span>
<span id="cb275-4"><a href="chapter3.html#cb275-4" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      c1 c2 c3
## row1  1  4  7
## row2  2  5  8
## row3  3  6  9</code></pre>
<hr />
<p>Add rows and columns</p>
<p>Special methods cbind/rbind are used to change the number of elements in rows and columns of matrices, as well as to quickly combine them.</p>
<p>The cbind function allows you to add one or more matrices and/or vectors behind one of the columns. That is, there is not a simple connection, but a comparison by key field. Consider an example:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="chapter3.html#cb277-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">101</span><span class="sc">:</span><span class="dv">103</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb277-2"><a href="chapter3.html#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb277-3"><a href="chapter3.html#cb277-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-4"><a href="chapter3.html#cb277-4" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">201</span><span class="sc">:</span><span class="dv">203</span>, <span class="dv">1001</span><span class="sc">:</span><span class="dv">1003</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb277-5"><a href="chapter3.html#cb277-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>)</span>
<span id="cb277-6"><a href="chapter3.html#cb277-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-7"><a href="chapter3.html#cb277-7" aria-hidden="true" tabindex="-1"></a>m_bind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(m1, m2)</span>
<span id="cb277-8"><a href="chapter3.html#cb277-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-9"><a href="chapter3.html#cb277-9" aria-hidden="true" tabindex="-1"></a>m1</span></code></pre></div>
<pre><code>##      A   B
## [1,] 1 101
## [2,] 2 102
## [3,] 3 103</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="chapter3.html#cb279-1" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##        C    D
## [1,] 201 1001
## [2,] 202 1002
## [3,] 203 1003</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="chapter3.html#cb281-1" aria-hidden="true" tabindex="-1"></a>m_bind</span></code></pre></div>
<pre><code>##      A   B   C    D
## [1,] 1 101 201 1001
## [2,] 2 102 202 1002
## [3,] 3 103 203 1003</code></pre>
<hr />
</div>
<div id="access-to-matrix-elements" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Access to matrix elements</h3>
<p>The elements of the matrix are accessed by the index of rows and columns. You can select ranges in a similar way to vectors.</p>
<p>Let’s look at an example:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="chapter3.html#cb283-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">11</span><span class="sc">:</span><span class="dv">25</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb283-2"><a href="chapter3.html#cb283-2" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]   11   14   17   20   23
## [2,]   12   15   18   21   24
## [3,]   13   16   19   22   25</code></pre>
<p>To display the 10th element of the matrix, you can use the entries (note that the account is from the right left corner of the columns):</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="chapter3.html#cb285-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">10</span>]    </span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="chapter3.html#cb287-1" aria-hidden="true" tabindex="-1"></a>m[[<span class="dv">10</span>]]</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>To display the same element using row and column indexes, write as follows:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="chapter3.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Row #1</span></span>
<span id="cb289-2"><a href="chapter3.html#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Column #4</span></span>
<span id="cb289-3"><a href="chapter3.html#cb289-3" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Question: What record should you use ti get 18?</p>
<p>Answer: m[2,3]</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="chapter3.html#cb291-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 18</code></pre>
<p>If you want to output / use an entire row or a whole column, then the block with the index of unnecessary dimensionality can be left blank:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="chapter3.html#cb293-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>, ] <span class="co"># first row only</span></span></code></pre></div>
<pre><code>## [1] 11 14 17 20 23</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="chapter3.html#cb295-1" aria-hidden="true" tabindex="-1"></a>m[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), ] <span class="co"># first and third row only</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]   11   14   17   20   23
## [2,]   13   16   19   22   25</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="chapter3.html#cb297-1" aria-hidden="true" tabindex="-1"></a>m[, <span class="dv">1</span>] <span class="co"># first column only</span></span></code></pre></div>
<pre><code>## [1] 11 12 13</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="chapter3.html#cb299-1" aria-hidden="true" tabindex="-1"></a>m[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] <span class="co"># first and third column only</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   11   17
## [2,]   12   18
## [3,]   13   19</code></pre>
<p>You can also specify a list of rows and columns to be output / received simultaneously:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="chapter3.html#cb301-1" aria-hidden="true" tabindex="-1"></a>m[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   14   17   20
## [2,]   16   19   22</code></pre>
<p>You can exclude individual columns or rows by using indexes with minus signs (-):</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="chapter3.html#cb303-1" aria-hidden="true" tabindex="-1"></a>m[<span class="sc">-</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   12   21   24
## [2,]   13   22   25</code></pre>
<hr />
</div>
<div id="useful-functions-1" class="section level3" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Useful functions</h3>
<p>Matrix dimmentions</p>
<p>To obtain information about the dimensions of the table, there are special functions: nrow(), ncol(), dim():</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="chapter3.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decalre matrix</span></span>
<span id="cb305-2"><a href="chapter3.html#cb305-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb305-3"><a href="chapter3.html#cb305-3" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    6   11
## [2,]    2    7   12
## [3,]    3    8   13
## [4,]    4    9   14
## [5,]    5   10   15</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="chapter3.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Rows:&quot;</span>, <span class="fu">nrow</span>(m)))</span></code></pre></div>
<pre><code>## [1] &quot;Rows: 5&quot;</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="chapter3.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Cols:&quot;</span>, <span class="fu">ncol</span>(m)))</span></code></pre></div>
<pre><code>## [1] &quot;Cols: 3&quot;</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="chapter3.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Dim:&quot;</span>, <span class="fu">paste0</span>(<span class="fu">dim</span>(m), <span class="at">collapse =</span> <span class="st">&quot; x &quot;</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;Dim: 5 x 3&quot;</code></pre>
<p>Using nrow() andncol() allows you to access the last row and column of the matrix, respectively:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="chapter3.html#cb313-1" aria-hidden="true" tabindex="-1"></a>m[<span class="fu">nrow</span>(m), ] <span class="co"># last row</span></span></code></pre></div>
<pre><code>## [1]  5 10 15</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="chapter3.html#cb315-1" aria-hidden="true" tabindex="-1"></a>m[, <span class="fu">ncol</span>(m)] <span class="co"># last colum</span></span></code></pre></div>
<pre><code>## [1] 11 12 13 14 15</code></pre>
<hr />
</div>
</div>
<div id="factors" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Factors</h2>
<p>Factors in R programming allow you to represent a vector of values as categorical values, rather than just a set of text data or numbers. The advantage of the categorical data type is that the element can take only a limited number of values, and not any value that allows the data type.</p>
<p>For example, a numeric vector may contain an infinitely large variation of the values c(1, 0.021, 192.1444, …, etc.), the character sets may also be different c (“sdf &amp; Tg6,”“sdf * Y &amp; 65”). The number of combinations of such vectors is very large.</p>
<p>In the case of categories, we are talking about certain fixed values. A good example is forms that are filled out on sites with drop-down lists, where the user cannot enter a value, but only select from an existing list. So in the gender field there is usually a limited set of possible options: Male,Female, Other. The user can select only one of these values ​​and does not have the ability to enter something else (this is an example, each resource can make different forms for users).</p>
<p>Creation of factors in R occurs by means of function factor():</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="chapter3.html#cb317-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb317-2"><a href="chapter3.html#cb317-2" aria-hidden="true" tabindex="-1"></a>gender </span></code></pre></div>
<pre><code>## [1] &quot;Male&quot;   &quot;Female&quot; &quot;Other&quot;  &quot;Male&quot;   &quot;Female&quot; &quot;Male&quot;   &quot;Female&quot; &quot;Female&quot;</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="chapter3.html#cb319-1" aria-hidden="true" tabindex="-1"></a>gender_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(gender)</span>
<span id="cb319-2"><a href="chapter3.html#cb319-2" aria-hidden="true" tabindex="-1"></a>gender_factor</span></code></pre></div>
<pre><code>## [1] Male   Female Other  Male   Female Male   Female Female
## Levels: Female Male Other</code></pre>
<p>When creating a factor, each unique element gets its own digital? (from the outside it looks like this, it needs to be clarified) value inside the collection, this value is called the level (level). In the previous example, the variable gender _factor received the levels Female, Male, Other in alphabetical order. If we convert factors to numbers, we get:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="chapter3.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(gender_factor)</span></code></pre></div>
<pre><code>## [1] 2 1 3 2 1 2 1 1</code></pre>
<p>gender Thus it is clear that Female = 1, Male = 2, Other = 3. Consider a situation where we get data in which the order of values in the factor collection is different, for example, we need to specify so that Male = 1, Female = 2, Other = 3:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="chapter3.html#cb323-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb323-2"><a href="chapter3.html#cb323-2" aria-hidden="true" tabindex="-1"></a>gender_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>))</span>
<span id="cb323-3"><a href="chapter3.html#cb323-3" aria-hidden="true" tabindex="-1"></a>gender_factor</span></code></pre></div>
<pre><code>## [1] Male   Female Other  Male   Female Male   Female Female
## Levels: Male Female Other</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="chapter3.html#cb325-1" aria-hidden="true" tabindex="-1"></a>lvl <span class="ot">&lt;-</span> <span class="fu">levels</span>(gender_factor) <span class="co"># read levels of factor</span></span>
<span id="cb325-2"><a href="chapter3.html#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(lvl)</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="chapter3.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(lvl)</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA NA NA</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="chapter3.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(gender_factor)</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 2 1 2 2</code></pre>
<p>Now the order of the levels corresponds to ours and this will allow us to successfully combine our collection with similar ones that have the same set of values.</p>
<p>Sometimes it is necessary to change not only the order of the elements in the factorial collection, but also their names. Let’s consider a situation when we need to rename values Male,Female, Other inM, F,O:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="chapter3.html#cb332-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb332-2"><a href="chapter3.html#cb332-2" aria-hidden="true" tabindex="-1"></a>gender_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Other&quot;</span>))</span>
<span id="cb332-3"><a href="chapter3.html#cb332-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(gender_factor) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;O&quot;</span>)</span>
<span id="cb332-4"><a href="chapter3.html#cb332-4" aria-hidden="true" tabindex="-1"></a>gender_factor</span></code></pre></div>
<pre><code>## [1] M F O M F M F F
## Levels: M F O</code></pre>
<p>But you should check you type with is.factor() before converting to numbers:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="chapter3.html#cb334-1" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Rivne&quot;</span>, <span class="st">&quot;Ostroh&quot;</span>, <span class="st">&quot;Zdolbuniv&quot;</span>, <span class="st">&quot;Dubno&quot;</span>, <span class="st">&quot;Sarny&quot;</span>)</span>
<span id="cb334-2"><a href="chapter3.html#cb334-2" aria-hidden="true" tabindex="-1"></a>cities_as_factors <span class="ot">&lt;-</span> <span class="fu">factor</span>(cities)</span>
<span id="cb334-3"><a href="chapter3.html#cb334-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(cities_as_factors)</span></code></pre></div>
<pre><code>## [1] 3 2 5 1 4</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="chapter3.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(cities) <span class="co"># you cannot convert characters vector to numerics</span></span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA NA NA NA NA</code></pre>
<hr />
</div>
<div id="dataframes" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Dataframes</h2>
<p>Data frames are the most popular data structure in R, becouse it allows collect data with different columns type in one object and quickly manipulate it.</p>
<p>A data frame, a matrix-like structure whose columns may be of differing types (numeric, logical, factor and character and so on).</p>
<p>The function data.frame() creates data frames, tightly coupled collections of variables which share many of the properties of matrices and of lists, used as the fundamental data structure by most of R’s modeling software.</p>
<p><em>Syntax</em></p>
<p>{r}
data.frame(…, row.names = NULL, check.rows = FALSE,
check.names = TRUE, fix.empty.names = TRUE,
stringsAsFactors = FALSE)</p>
<p><em>Arguments</em> (top useful)</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
… - these arguments are of either the form value or tag = value. Component names are created based on the tag (if present) or the deparsed argument itself.</li>
<li><input type="checkbox" disabled="" checked="" />
row.names - NULL or a single integer or character string specifying a column to be used as row names, or a character or integer vector giving the row names for the data frame.</li>
<li><input type="checkbox" disabled="" checked="" />
stringsAsFactors - logical: should character vectors be converted to factors? The ‘factory-fresh’ default has been TRUE previously but has been changed to FALSE</li>
</ul>
<p><em>Details</em></p>
<p>A data frame is a list of variables of the same number of rows with unique row names, given class data.frame. If no variables are included, the row names determine the number of rows.</p>
<p>data.frame converts each of its arguments to a data frame by calling as.data.frame(optional = TRUE). As that is a generic function, methods can be written to change the behaviour of arguments according to their classes: R comes with many such methods. Character variables passed to data.frame are converted to factor columns unless protected argument stringsAsFactors is false. If a list or data frame or matrix is passed to data.frame it is as if each component or column had been passed as a separate argument.</p>
<hr />
<div id="creating-data-frames" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Creating Data Frames</h3>
<p>Data frames are usually created by reading in a dataset from file, scraping from websites. However, data frames can also be created explicitly with the data.frame() function or they can be coerced from other types of objects like lists. In this case I’ll create a simple data frame df and assess its basic structure:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="chapter3.html#cb339-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb339-2"><a href="chapter3.html#cb339-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">char_col =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb339-3"><a href="chapter3.html#cb339-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_col =</span> <span class="fu">c</span>(T,T,T,F,T),</span>
<span id="cb339-4"><a href="chapter3.html#cb339-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">double_col =</span> <span class="fu">c</span>(<span class="fl">2.1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, pi, <span class="fl">12.7</span>))</span>
<span id="cb339-5"><a href="chapter3.html#cb339-5" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   id char_col log_col double_col
## 1  1        a    TRUE   2.100000
## 2  2        b    TRUE   1.000000
## 3  3        c    TRUE   0.500000
## 4  4        d   FALSE   3.141593
## 5  5        e    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="chapter3.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assess the structure of a data frame</span></span>
<span id="cb341-2"><a href="chapter3.html#cb341-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ id        : int  1 2 3 4 5
##  $ char_col  : chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##  $ log_col   : logi  TRUE TRUE TRUE FALSE TRUE
##  $ double_col: num  2.1 1 0.5 3.14 12.7</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="chapter3.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows</span></span>
<span id="cb343-2"><a href="chapter3.html#cb343-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="chapter3.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of columns</span></span>
<span id="cb345-2"><a href="chapter3.html#cb345-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="chapter3.html#cb347-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb347-2"><a href="chapter3.html#cb347-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">char_col =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb347-3"><a href="chapter3.html#cb347-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_col =</span> <span class="fu">c</span>(T,T,T,F,T),</span>
<span id="cb347-4"><a href="chapter3.html#cb347-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">double_col =</span> <span class="fu">c</span>(<span class="fl">2.1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, pi, <span class="fl">12.7</span>),</span>
<span id="cb347-5"><a href="chapter3.html#cb347-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="co"># warning it depends on local settings of R</span></span>
<span id="cb347-6"><a href="chapter3.html#cb347-6" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   i char_col log_col double_col
## 1 1        a    TRUE   2.100000
## 2 2        b    TRUE   1.000000
## 3 3        c    TRUE   0.500000
## 4 4        d   FALSE   3.141593
## 5 5        e    TRUE  12.700000</code></pre>
<p>Creating data.frames from lists (P.S. lists explained in next chapter):</p>
<pre><code>demo_list &lt;- list(int_col = v_int,
                  char_col = v_char,
                  log_col = v_log,
                  double_col = v_double)
as.data.frame(demo_list)</code></pre>
<p>Matrix can be base for data frame too:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="chapter3.html#cb350-1" aria-hidden="true" tabindex="-1"></a>demo_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">119</span>, <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb350-2"><a href="chapter3.html#cb350-2" aria-hidden="true" tabindex="-1"></a>demo_matrix</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]  100  105  110  115
## [2,]  101  106  111  116
## [3,]  102  107  112  117
## [4,]  103  108  113  118
## [5,]  104  109  114  119</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="chapter3.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(demo_matrix)</span></code></pre></div>
<pre><code>##    V1  V2  V3  V4
## 1 100 105 110 115
## 2 101 106 111 116
## 3 102 107 112 117
## 4 103 108 113 118
## 5 104 109 114 119</code></pre>
<hr />
</div>
<div id="extending-data-frames" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Extending data frames</h3>
<p>You can add rows and columns to data frame. Merging two data frames by selected column values awailable too.</p>
<p>cbind() adds new column</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="chapter3.html#cb354-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">A1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb354-2"><a href="chapter3.html#cb354-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">A2 =</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;F&quot;</span>))</span>
<span id="cb354-3"><a href="chapter3.html#cb354-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   A1 A2
## 1  A  D
## 2  B  E
## 3  C  F</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="chapter3.html#cb356-1" aria-hidden="true" tabindex="-1"></a>A3 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb356-2"><a href="chapter3.html#cb356-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(df, A3)</span></code></pre></div>
<pre><code>##   A1 A2 A3
## 1  A  D  1
## 2  B  E  2
## 3  C  F  3</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="chapter3.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;A1&quot; &quot;A2&quot;</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="chapter3.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;B1&quot;</span>, <span class="st">&quot;B2&quot;</span>)</span>
<span id="cb360-2"><a href="chapter3.html#cb360-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;B1&quot; &quot;B2&quot;</code></pre>
<p>rbind() adds new row</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="chapter3.html#cb362-1" aria-hidden="true" tabindex="-1"></a>letters_frame <span class="ot">&lt;-</span>  <span class="fu">data.frame</span>(<span class="at">A1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb362-2"><a href="chapter3.html#cb362-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">A2 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb362-3"><a href="chapter3.html#cb362-3" aria-hidden="true" tabindex="-1"></a>letters_frame</span></code></pre></div>
<pre><code>##   A1 A2
## 1  A  1
## 2  B  2
## 3  C  3</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="chapter3.html#cb364-1" aria-hidden="true" tabindex="-1"></a>next_row <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="dv">4</span>) <span class="co"># data types by row should be the same as in initial data frame</span></span>
<span id="cb364-2"><a href="chapter3.html#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(letters_frame, next_row)</span></code></pre></div>
<pre><code>##   A1 A2
## 1  A  1
## 2  B  2
## 3  C  3
## 4  D  4</code></pre>
</div>
<div id="merge-df" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Merge DF</h3>
<p>Data frames could me merged by key with merge():</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="chapter3.html#cb366-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Id =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb366-2"><a href="chapter3.html#cb366-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Nick&quot;</span>, <span class="st">&quot;Jake&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Mary&quot;</span>))</span>
<span id="cb366-3"><a href="chapter3.html#cb366-3" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>##   Id Name
## 1  1 Nick
## 2  2 Jake
## 3  3 Jane
## 4  4 Mary</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="chapter3.html#cb368-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Id =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="co"># defferent order from Id in df1</span></span>
<span id="cb368-2"><a href="chapter3.html#cb368-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">21</span>, <span class="dv">45</span>, <span class="dv">20</span>))</span>
<span id="cb368-3"><a href="chapter3.html#cb368-3" aria-hidden="true" tabindex="-1"></a>df2</span></code></pre></div>
<pre><code>##   Id Age
## 1  2  34
## 2  1  21
## 3  3  45
## 4  5  20</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="chapter3.html#cb370-1" aria-hidden="true" tabindex="-1"></a>df_final <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;Id&quot;</span>, <span class="at">all.x =</span> F, <span class="at">all.y =</span> F)</span>
<span id="cb370-2"><a href="chapter3.html#cb370-2" aria-hidden="true" tabindex="-1"></a>df_final</span></code></pre></div>
<pre><code>##   Id Name Age
## 1  1 Nick  21
## 2  2 Jake  34
## 3  3 Jane  45</code></pre>
<hr />
</div>
<div id="subsetting-data-frames" class="section level3" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Subsetting Data Frames</h3>
<p>Data frames possess the characteristics of both lists and matrices: if you subset with a single vector, they behave like lists and will return the selected columns with all rows; if you subset with two vectors, they behave like matrices and can be subset by row and column:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="chapter3.html#cb372-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">int_col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb372-2"><a href="chapter3.html#cb372-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">char_col =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb372-3"><a href="chapter3.html#cb372-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_col =</span> <span class="fu">c</span>(T,T,T,F,T),</span>
<span id="cb372-4"><a href="chapter3.html#cb372-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">double_col =</span> <span class="fu">c</span>(<span class="fl">2.1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, pi, <span class="fl">12.7</span>),</span>
<span id="cb372-5"><a href="chapter3.html#cb372-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">row.names =</span> <span class="fu">paste0</span>(<span class="st">&quot;row_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="co"># setting row names </span></span>
<span id="cb372-6"><a href="chapter3.html#cb372-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="co"># warning it depends on local settings of R</span></span>
<span id="cb372-7"><a href="chapter3.html#cb372-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        a    TRUE   2.100000
## row_2       2        b    TRUE   1.000000
## row_3       3        c    TRUE   0.500000
## row_4       4        d   FALSE   3.141593
## row_5       5        e    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="chapter3.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns using $ sign</span></span>
<span id="cb374-2"><a href="chapter3.html#cb374-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>log_col</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="chapter3.html#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsetting by row numbers</span></span>
<span id="cb376-2"><a href="chapter3.html#cb376-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>, ] <span class="co"># first row</span></span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        a    TRUE        2.1</code></pre>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="chapter3.html#cb378-1" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">nrow</span>(df), ] <span class="co"># last row</span></span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_5       5        e    TRUE       12.7</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="chapter3.html#cb380-1" aria-hidden="true" tabindex="-1"></a>df[<span class="sc">-</span><span class="dv">1</span>, ] <span class="co"># all except first row</span></span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_2       2        b    TRUE   1.000000
## row_3       3        c    TRUE   0.500000
## row_4       4        d   FALSE   3.141593
## row_5       5        e    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="chapter3.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsetting by row names</span></span>
<span id="cb382-2"><a href="chapter3.html#cb382-2" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">c</span>(<span class="st">&quot;row_4&quot;</span>, <span class="st">&quot;row_5&quot;</span>), ]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_4       4        d   FALSE   3.141593
## row_5       5        e    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="chapter3.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsetting columns like a list</span></span>
<span id="cb384-2"><a href="chapter3.html#cb384-2" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">&quot;log_col&quot;</span>, <span class="st">&quot;double_col&quot;</span>)]</span></code></pre></div>
<pre><code>##       log_col double_col
## row_1    TRUE   2.100000
## row_2    TRUE   1.000000
## row_3    TRUE   0.500000
## row_4   FALSE   3.141593
## row_5    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="chapter3.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subset for both rows and columns</span></span>
<span id="cb386-2"><a href="chapter3.html#cb386-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>)]</span></code></pre></div>
<pre><code>##       int_col log_col double_col
## row_2       2    TRUE   1.000000
## row_3       3    TRUE   0.500000
## row_4       4   FALSE   3.141593
## row_5       5    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="chapter3.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select only with log_col == TRUE</span></span>
<span id="cb388-2"><a href="chapter3.html#cb388-2" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>double_col <span class="sc">&gt;</span> <span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        a    TRUE   2.100000
## row_4       4        d   FALSE   3.141593
## row_5       5        e    TRUE  12.700000</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="chapter3.html#cb390-1" aria-hidden="true" tabindex="-1"></a>df[<span class="sc">!</span>df<span class="sc">$</span>log_col, ]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_4       4        d   FALSE   3.141593</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="chapter3.html#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;s&quot;</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;s&quot;</span>, <span class="st">&quot;t&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="chapter3.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select only with char_col == &#39;a&#39;, &#39;e&#39;</span></span>
<span id="cb394-2"><a href="chapter3.html#cb394-2" aria-hidden="true" tabindex="-1"></a>chars <span class="ot">&lt;-</span> df<span class="sc">$</span>char_col <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb394-3"><a href="chapter3.html#cb394-3" aria-hidden="true" tabindex="-1"></a>chars</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="chapter3.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(chars)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="chapter3.html#cb398-1" aria-hidden="true" tabindex="-1"></a>df[chars, ] <span class="co"># %in% operator for check multuiple values</span></span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        a    TRUE        2.1
## row_5       5        e    TRUE       12.7</code></pre>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="chapter3.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select only with double_col &gt; 1 and log_col == TRUE</span></span>
<span id="cb400-2"><a href="chapter3.html#cb400-2" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>log_col <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> df<span class="sc">$</span>double_col <span class="sc">&gt;</span> <span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        a    TRUE        2.1
## row_5       5        e    TRUE       12.7</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="chapter3.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select only specific columns with double_col &gt; 1 and log_col == TRUE</span></span>
<span id="cb402-2"><a href="chapter3.html#cb402-2" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>log_col <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> df<span class="sc">$</span>double_col <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;log_col&quot;</span>, <span class="st">&quot;int_col&quot;</span>, <span class="st">&quot;double_col&quot;</span>)]</span></code></pre></div>
<pre><code>##       log_col int_col double_col
## row_1    TRUE       1        2.1
## row_5    TRUE       5       12.7</code></pre>
<hr />
</div>
<div id="order-data.frame" class="section level3" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> Order data.frame</h3>
<p>Let’s use our previous sample data.frame but with unordered values:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="chapter3.html#cb404-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">int_col =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb404-2"><a href="chapter3.html#cb404-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">char_col =</span> <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb404-3"><a href="chapter3.html#cb404-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_col =</span> <span class="fu">c</span>(T,T,T,F,T),</span>
<span id="cb404-4"><a href="chapter3.html#cb404-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">double_col =</span> <span class="fu">c</span>(<span class="fl">2.1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, pi, <span class="fl">12.7</span>),</span>
<span id="cb404-5"><a href="chapter3.html#cb404-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">row.names =</span> <span class="fu">paste0</span>(<span class="st">&quot;row_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="co"># setting row names </span></span>
<span id="cb404-6"><a href="chapter3.html#cb404-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="co"># warning it depends on local settings of R</span></span>
<span id="cb404-7"><a href="chapter3.html#cb404-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_1       1        b    TRUE   2.100000
## row_2       5        a    TRUE   1.000000
## row_3       3        a    TRUE   0.500000
## row_4       4        d   FALSE   3.141593
## row_5       2        e    TRUE  12.700000</code></pre>
<p>You can use order() function for sorting data.frames.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="chapter3.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort by int_col</span></span>
<span id="cb406-2"><a href="chapter3.html#cb406-2" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(df<span class="sc">$</span>char_col)</span></code></pre></div>
<pre><code>## [1] 2 3 1 4 5</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="chapter3.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(df<span class="sc">$</span>int_col)</span></code></pre></div>
<pre><code>## [1] 1 5 3 4 2</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="chapter3.html#cb410-1" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">order</span>(df<span class="sc">$</span>char_col),]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_2       5        a    TRUE   1.000000
## row_3       3        a    TRUE   0.500000
## row_1       1        b    TRUE   2.100000
## row_4       4        d   FALSE   3.141593
## row_5       2        e    TRUE  12.700000</code></pre>
<p>Use - minus to sort descending</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="chapter3.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort by double_col</span></span>
<span id="cb412-2"><a href="chapter3.html#cb412-2" aria-hidden="true" tabindex="-1"></a><span class="co"># rev</span></span>
<span id="cb412-3"><a href="chapter3.html#cb412-3" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">rev</span>(<span class="fu">order</span>(df<span class="sc">$</span>int_col)), ]</span></code></pre></div>
<pre><code>##       int_col char_col log_col double_col
## row_2       5        a    TRUE   1.000000
## row_4       4        d   FALSE   3.141593
## row_3       3        a    TRUE   0.500000
## row_5       2        e    TRUE  12.700000
## row_1       1        b    TRUE   2.100000</code></pre>
<p>You can also sor by multiple columns with order(column1, column2) or order(column1, -column2).</p>
</div>
<div id="manipulating-data.frames" class="section level3" number="3.5.6">
<h3><span class="header-section-number">3.5.6</span> Manipulating data.frames</h3>
<hr />
</div>
<div id="tasks-on-data.frames" class="section level3" number="3.5.7">
<h3><span class="header-section-number">3.5.7</span> Tasks on data.frames</h3>
<p><em>Task 1</em>
Write a code evaluates $y = x^2 + e, where x is a random number in range [0; 1].</p>
<p>Print calculation result as data.frame with columns X, E, Y.</p>
<p>Use plot() funtion to visualize X vs Y as line chart (type = l or b).</p>
<p><em>Solution</em></p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="chapter3.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initiate data.frame</span></span>
<span id="cb414-2"><a href="chapter3.html#cb414-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">X =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb414-3"><a href="chapter3.html#cb414-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">E =</span> <span class="fu">sample</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="at">replace =</span> T),</span>
<span id="cb414-4"><a href="chapter3.html#cb414-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Y =</span> <span class="cn">NA</span>)</span>
<span id="cb414-5"><a href="chapter3.html#cb414-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   X E  Y
## 1 1 5 NA
## 2 2 2 NA
## 3 3 1 NA
## 4 4 3 NA
## 5 5 1 NA
## 6 6 3 NA</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="chapter3.html#cb416-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Y <span class="ot">&lt;-</span> <span class="fu">with</span>(df, X<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> E)</span>
<span id="cb416-2"><a href="chapter3.html#cb416-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   X E  Y
## 1 1 5  6
## 2 2 2  6
## 3 3 1 10
## 4 4 3 19
## 5 5 1 26
## 6 6 3 39</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="chapter3.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>X, df<span class="sc">$</span>Y, <span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="03-chapter3_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p><em>Task 2</em></p>
<ol style="list-style-type: decimal">
<li>Install package and load package ISLR</li>
<li>Save dataset Credit into variable credit_data.</li>
<li>Check dataset structure with str() function.</li>
<li>Convert Student status “yes/no” to 1/0</li>
<li>Order dataset by Rating descending</li>
<li>Filter only Age &gt; 50 with Rating &gt; 400, how many records do you get?</li>
<li>Evaluate average Income for Married = YES Married = NO with Age in range [20,30]
7.1 Make the same for Age [30;40] Any conclusion?</li>
</ol>
<p><em>Solution</em></p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="chapter3.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. install.package ISLR</span></span>
<span id="cb419-2"><a href="chapter3.html#cb419-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ISLR&quot;)</span></span>
<span id="cb419-3"><a href="chapter3.html#cb419-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR)</span></code></pre></div>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="chapter3.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Save dataset `Credit` into variable `credit_data`.</span></span>
<span id="cb420-2"><a href="chapter3.html#cb420-2" aria-hidden="true" tabindex="-1"></a>credit_data <span class="ot">&lt;-</span> ISLR<span class="sc">::</span>Credit</span>
<span id="cb420-3"><a href="chapter3.html#cb420-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credit_data, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   ID  Income Limit Rating Cards Age Education Gender Student Married Ethnicity
## 1  1  14.891  3606    283     2  34        11   Male      No     Yes Caucasian
## 2  2 106.025  6645    483     3  82        15 Female     Yes     Yes     Asian
## 3  3 104.593  7075    514     4  71        11   Male      No      No     Asian
##   Balance
## 1     333
## 2     903
## 3     580</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="chapter3.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Check dataset structure with `str()` function.</span></span>
<span id="cb422-2"><a href="chapter3.html#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(credit_data)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    400 obs. of  12 variables:
##  $ ID       : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Income   : num  14.9 106 104.6 148.9 55.9 ...
##  $ Limit    : int  3606 6645 7075 9504 4897 8047 3388 7114 3300 6819 ...
##  $ Rating   : int  283 483 514 681 357 569 259 512 266 491 ...
##  $ Cards    : int  2 3 4 3 2 4 2 2 5 3 ...
##  $ Age      : int  34 82 71 36 68 77 37 87 66 41 ...
##  $ Education: int  11 15 11 11 16 10 12 9 13 19 ...
##  $ Gender   : Factor w/ 2 levels &quot; Male&quot;,&quot;Female&quot;: 1 2 1 2 1 1 2 1 2 2 ...
##  $ Student  : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 2 1 1 1 1 1 1 1 2 ...
##  $ Married  : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 2 2 1 1 2 1 1 1 1 2 ...
##  $ Ethnicity: Factor w/ 3 levels &quot;African American&quot;,..: 3 2 2 2 3 3 1 2 3 1 ...
##  $ Balance  : int  333 903 580 964 331 1151 203 872 279 1350 ...</code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="chapter3.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Student status &quot;yes/no&quot; to 1/0</span></span>
<span id="cb424-2"><a href="chapter3.html#cb424-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-3"><a href="chapter3.html#cb424-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(credit_data<span class="sc">$</span>Student) <span class="sc">-</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>##   [1] 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
##  [38] 0 0 0 0 1 0 0 0 0 1 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
##  [75] 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 1 1 0 0 0 0 0 0 0 0
## [112] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
## [149] 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [186] 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 0 1 0
## [223] 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0
## [260] 0 0 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
## [297] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0 0 0 0 0 1 0 0
## [334] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
## [371] 0 0 1 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="chapter3.html#cb426-1" aria-hidden="true" tabindex="-1"></a>credit_data<span class="sc">$</span>Student <span class="ot">&lt;-</span> <span class="fu">as.character</span>(credit_data<span class="sc">$</span>Student) <span class="co"># convert to character first / factors</span></span>
<span id="cb426-2"><a href="chapter3.html#cb426-2" aria-hidden="true" tabindex="-1"></a>credit_data<span class="sc">$</span>Student <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(credit_data<span class="sc">$</span>Student <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb426-3"><a href="chapter3.html#cb426-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-4"><a href="chapter3.html#cb426-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credit_data)</span></code></pre></div>
<pre><code>##   ID  Income Limit Rating Cards Age Education Gender Student Married Ethnicity
## 1  1  14.891  3606    283     2  34        11   Male       0     Yes Caucasian
## 2  2 106.025  6645    483     3  82        15 Female       1     Yes     Asian
## 3  3 104.593  7075    514     4  71        11   Male       0      No     Asian
## 4  4 148.924  9504    681     3  36        11 Female       0      No     Asian
## 5  5  55.882  4897    357     2  68        16   Male       0     Yes Caucasian
## 6  6  80.180  8047    569     4  77        10   Male       0      No Caucasian
##   Balance
## 1     333
## 2     903
## 3     580
## 4     964
## 5     331
## 6    1151</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="chapter3.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Order dataset by `Rating` descending</span></span>
<span id="cb428-2"><a href="chapter3.html#cb428-2" aria-hidden="true" tabindex="-1"></a>credit_data <span class="ot">&lt;-</span> credit_data[<span class="fu">order</span>(<span class="sc">-</span>credit_data<span class="sc">$</span>Rating), ]</span>
<span id="cb428-3"><a href="chapter3.html#cb428-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credit_data)</span></code></pre></div>
<pre><code>##      ID  Income Limit Rating Cards Age Education Gender Student Married
## 324 324 182.728 13913    982     4  98        17   Male       0     Yes
## 29   29 186.634 13414    949     2  41        14 Female       0     Yes
## 356 356 180.682 11966    832     2  58         8 Female       0     Yes
## 86   86 152.298 12066    828     4  41        12 Female       0     Yes
## 294 294 140.672 11200    817     7  46         9   Male       0     Yes
## 185 185 158.889 11589    805     1  62        17 Female       0     Yes
##            Ethnicity Balance
## 324        Caucasian    1999
## 29  African American    1809
## 356 African American    1405
## 86             Asian    1779
## 294 African American    1677
## 185        Caucasian    1448</code></pre>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="chapter3.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Filter only `Age &gt; 50` with `Rating &gt; 400`</span></span>
<span id="cb430-2"><a href="chapter3.html#cb430-2" aria-hidden="true" tabindex="-1"></a>credict_data_filtered <span class="ot">&lt;-</span> credit_data[credit_data<span class="sc">$</span>Age <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">&amp;</span> credit_data<span class="sc">$</span>Rating <span class="sc">&gt;</span> <span class="dv">400</span>, ]</span>
<span id="cb430-3"><a href="chapter3.html#cb430-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credict_data_filtered)</span></code></pre></div>
<pre><code>##      ID  Income Limit Rating Cards Age Education Gender Student Married
## 324 324 182.728 13913    982     4  98        17   Male       0     Yes
## 356 356 180.682 11966    832     2  58         8 Female       0     Yes
## 185 185 158.889 11589    805     1  62        17 Female       0     Yes
## 348 348 160.231 10748    754     2  69        17   Male       0      No
## 175 175 121.834 10673    750     3  54        16   Male       0      No
## 391 391 135.118 10578    747     3  81        15 Female       0     Yes
##            Ethnicity Balance
## 324        Caucasian    1999
## 356 African American    1405
## 185        Caucasian    1448
## 348        Caucasian    1192
## 175 African American    1573
## 391            Asian    1393</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="chapter3.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(credict_data_filtered)</span></code></pre></div>
<pre><code>## [1] 73</code></pre>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="chapter3.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="co">#7. Evaluate average `Income` for `Married = YES` `Married = NO` with age in rage [20,30]</span></span>
<span id="cb434-2"><a href="chapter3.html#cb434-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 7.1 Make the same for Age [30;40]</span></span>
<span id="cb434-3"><a href="chapter3.html#cb434-3" aria-hidden="true" tabindex="-1"></a>married <span class="ot">&lt;-</span> <span class="fu">with</span>(credit_data, credit_data[(Age<span class="sc">&gt;=</span><span class="dv">20</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span><span class="dv">30</span>) <span class="sc">&amp;</span> Married <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>, ])</span>
<span id="cb434-4"><a href="chapter3.html#cb434-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(married)</span></code></pre></div>
<pre><code>##      ID Income Limit Rating Cards Age Education Gender Student Married
## 11   11 63.095  8117    589     4  30        14   Male       0     Yes
## 114 114 69.251  6386    474     4  30        12 Female       0     Yes
## 45   45 31.861  6375    469     3  25        16 Female       0     Yes
## 19   19 49.570  6384    448     1  28         9 Female       0     Yes
## 44   44 36.929  6257    445     1  24        14 Female       0     Yes
## 151 151 63.931  5728    435     3  28        14 Female       0     Yes
##            Ethnicity Balance
## 11         Caucasian    1407
## 114            Asian     768
## 45         Caucasian    1120
## 19             Asian     891
## 44             Asian     976
## 151 African American     581</code></pre>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="chapter3.html#cb436-1" aria-hidden="true" tabindex="-1"></a>not_married <span class="ot">&lt;-</span> credit_data[credit_data<span class="sc">$</span>Age <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">30</span>) <span class="sc">&amp;</span> credit_data<span class="sc">$</span>Married <span class="sc">==</span> <span class="st">&quot;No&quot;</span>, ]</span>
<span id="cb436-2"><a href="chapter3.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(not_married)</span></code></pre></div>
<pre><code>##      ID Income Limit Rating Cards Age Education Gender Student Married
## 212 212 29.567  5309    397     3  25        15   Male       0      No
## 94   94 16.479  5435    388     2  26        16   Male       0      No
## 272 272 44.978  4866    347     1  30        10 Female       0      No
## 206 206 10.793  3878    321     8  29        13   Male       0      No
## 179 179 28.316  4391    316     2  29        10 Female       0      No
## 186 186 30.420  4442    316     1  30        14 Female       0      No
##            Ethnicity Balance
## 212        Caucasian     799
## 94  African American     937
## 272        Caucasian     436
## 206        Caucasian     638
## 179        Caucasian     453
## 186 African American     450</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="chapter3.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(married<span class="sc">$</span>Income) <span class="co"># is it better to be merried? :)</span></span></code></pre></div>
<pre><code>## [1] 35.25635</code></pre>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="chapter3.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(not_married<span class="sc">$</span>Income)</span></code></pre></div>
<pre><code>## [1] 25.16183</code></pre>
<hr />
</div>
</div>
<div id="lists" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Lists</h2>
<p>Lists are the R objects which contain elements of different types like − numbers, strings, vectors and another list inside it. A list can also contain a matrix or a function as its elements. List is created using list() function.</p>
<p>Before start lest see one more package for working with date lubridate. It has a lot of functions for date parsing, manipulating and other. Check it with:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="chapter3.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;lubridate&quot;)</span></span>
<span id="cb442-2"><a href="chapter3.html#cb442-2" aria-hidden="true" tabindex="-1"></a>??lubridate</span></code></pre></div>
<pre><code>## starting httpd help server ... done</code></pre>
<p>For our sample we need function ymd() that parse charater date from format like “2012-10-25.”</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="chapter3.html#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="chapter3.html#cb447-1" aria-hidden="true" tabindex="-1"></a>date1 <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">&quot;2021-05-25&quot;</span>)</span>
<span id="cb447-2"><a href="chapter3.html#cb447-2" aria-hidden="true" tabindex="-1"></a>date2 <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">&quot;2021-05-27&quot;</span>)</span>
<span id="cb447-3"><a href="chapter3.html#cb447-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb447-4"><a href="chapter3.html#cb447-4" aria-hidden="true" tabindex="-1"></a>date1</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-25&quot;</code></pre>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="chapter3.html#cb449-1" aria-hidden="true" tabindex="-1"></a>date2</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-27&quot;</code></pre>
<p>You can also use ymdhms() to parse date and time correctly.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="chapter3.html#cb451-1" aria-hidden="true" tabindex="-1"></a>datetime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:05:12&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span>) <span class="co"># wee need this for client transactions fix</span></span>
<span id="cb451-2"><a href="chapter3.html#cb451-2" aria-hidden="true" tabindex="-1"></a>datetime</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-25 11:05:12 UTC&quot;</code></pre>
<div id="creating-a-list" class="section level3" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Creating a List</h3>
<p>Following is an example to create a list containing vectors, strings, numbers and a logical values. Our list will describe a model of banks client:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="chapter3.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initial values</span></span>
<span id="cb453-2"><a href="chapter3.html#cb453-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-3"><a href="chapter3.html#cb453-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>) <span class="co"># for fixing pseudo-random</span></span>
<span id="cb453-4"><a href="chapter3.html#cb453-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-5"><a href="chapter3.html#cb453-5" aria-hidden="true" tabindex="-1"></a>client_name <span class="ot">&lt;-</span> <span class="st">&quot;John Doe&quot;</span></span>
<span id="cb453-6"><a href="chapter3.html#cb453-6" aria-hidden="true" tabindex="-1"></a>services <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;credit&quot;</span>, <span class="st">&quot;deposite&quot;</span>, <span class="st">&quot;online-app&quot;</span>)</span>
<span id="cb453-7"><a href="chapter3.html#cb453-7" aria-hidden="true" tabindex="-1"></a>is_active <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb453-8"><a href="chapter3.html#cb453-8" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">contract_id =</span> <span class="fu">sample</span>(<span class="dv">10000</span><span class="sc">:</span><span class="dv">99999</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">replace =</span> T),<span class="co"># random numbers</span></span>
<span id="cb453-9"><a href="chapter3.html#cb453-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">datetime =</span> <span class="fu">c</span>(<span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:05:12&quot;</span>),</span>
<span id="cb453-10"><a href="chapter3.html#cb453-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:07:14&quot;</span>),</span>
<span id="cb453-11"><a href="chapter3.html#cb453-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:08:02&quot;</span>),</span>
<span id="cb453-12"><a href="chapter3.html#cb453-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:12:45&quot;</span>),</span>
<span id="cb453-13"><a href="chapter3.html#cb453-13" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:47:00&quot;</span>),</span>
<span id="cb453-14"><a href="chapter3.html#cb453-14" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ymd_hms</span>(<span class="st">&quot;2021-05-25 11:48:08&quot;</span>)),</span>
<span id="cb453-15"><a href="chapter3.html#cb453-15" aria-hidden="true" tabindex="-1"></a>                         <span class="at">oper_type =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">replace =</span> T), <span class="co"># 1 for debet, 0 for credet</span></span>
<span id="cb453-16"><a href="chapter3.html#cb453-16" aria-hidden="true" tabindex="-1"></a>                         <span class="at">amount =</span> <span class="fu">round</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span> <span class="fu">runif</span>(<span class="dv">6</span>),<span class="dv">2</span>))   </span>
<span id="cb453-17"><a href="chapter3.html#cb453-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-18"><a href="chapter3.html#cb453-18" aria-hidden="true" tabindex="-1"></a><span class="co">#change AMOUNT to minus for debet (opertype == 1 </span></span>
<span id="cb453-19"><a href="chapter3.html#cb453-19" aria-hidden="true" tabindex="-1"></a>transactions<span class="sc">$</span>amount <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(transactions<span class="sc">$</span>oper_type <span class="sc">==</span> <span class="dv">1</span>, (<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>transactions<span class="sc">$</span>amount, transactions<span class="sc">$</span>amount) </span>
<span id="cb453-20"><a href="chapter3.html#cb453-20" aria-hidden="true" tabindex="-1"></a>transactions</span></code></pre></div>
<pre><code>##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="chapter3.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating list of signle objects, vector and dataframe</span></span>
<span id="cb455-2"><a href="chapter3.html#cb455-2" aria-hidden="true" tabindex="-1"></a>list_data <span class="ot">&lt;-</span> <span class="fu">list</span>(client_name, is_active, services, transactions)</span>
<span id="cb455-3"><a href="chapter3.html#cb455-3" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;John Doe&quot;
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## [[4]]
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21</code></pre>
</div>
<div id="naming-list-elements" class="section level3" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Naming List Elements</h3>
<p>Its better to name elements in list:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="chapter3.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(list_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ClientName&quot;</span>, <span class="st">&quot;IsActive&quot;</span>, <span class="st">&quot;Services&quot;</span>, <span class="st">&quot;Transactions&quot;</span>)</span>
<span id="cb457-2"><a href="chapter3.html#cb457-2" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21</code></pre>
<p>You can extend list “on fly” with $:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="chapter3.html#cb459-1" aria-hidden="true" tabindex="-1"></a>list_data<span class="sc">$</span>ClientName</span></code></pre></div>
<pre><code>## [1] &quot;John Doe&quot;</code></pre>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="chapter3.html#cb461-1" aria-hidden="true" tabindex="-1"></a>list_data<span class="sc">$</span>ClientId <span class="ot">&lt;-</span> <span class="dv">11125489656</span></span>
<span id="cb461-2"><a href="chapter3.html#cb461-2" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21
## 
## $ClientId
## [1] 11125489656</code></pre>
<hr />
</div>
<div id="accessing-list-elements" class="section level3" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Accessing List Elements</h3>
<p>For now every element can be viewed with index in [[]] or []:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="chapter3.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="co"># access to list element</span></span>
<span id="cb463-2"><a href="chapter3.html#cb463-2" aria-hidden="true" tabindex="-1"></a>list_data[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;</code></pre>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="chapter3.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(list_data[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="chapter3.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="co"># access to object</span></span>
<span id="cb467-2"><a href="chapter3.html#cb467-2" aria-hidden="true" tabindex="-1"></a>list_data[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;John Doe&quot;</code></pre>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="chapter3.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(list_data[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Access by $ also anbled:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="chapter3.html#cb471-1" aria-hidden="true" tabindex="-1"></a>list_data<span class="sc">$</span>Transactions</span></code></pre></div>
<pre><code>##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21</code></pre>
</div>
<div id="manipulating-list-elements" class="section level3" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> Manipulating List Elements</h3>
<p>Lets continue using out list_data list.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="chapter3.html#cb473-1" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21
## 
## $ClientId
## [1] 11125489656</code></pre>
<p>We can change data with [] and access with $ symbol.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="chapter3.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing clint name with index</span></span>
<span id="cb475-2"><a href="chapter3.html#cb475-2" aria-hidden="true" tabindex="-1"></a>list_data[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;New Name&quot;</span></span>
<span id="cb475-3"><a href="chapter3.html#cb475-3" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;New Name&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21
## 
## $ClientId
## [1] 11125489656</code></pre>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="chapter3.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing data with $</span></span>
<span id="cb477-2"><a href="chapter3.html#cb477-2" aria-hidden="true" tabindex="-1"></a>list_data<span class="sc">$</span>ClientName <span class="ot">=</span> <span class="st">&quot;John Doe&quot;</span></span>
<span id="cb477-3"><a href="chapter3.html#cb477-3" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21
## 
## $ClientId
## [1] 11125489656</code></pre>
<p>Yo can merge lists with c() function. Let’s create new list and attach it to the list_data:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="chapter3.html#cb479-1" aria-hidden="true" tabindex="-1"></a>list_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Consultant =</span> <span class="fu">list</span>(<span class="at">Name =</span> <span class="st">&quot;David Cameron&quot;</span>, <span class="at">PhoneNum =</span> <span class="st">&quot;+9562311855&quot;</span>))</span>
<span id="cb479-2"><a href="chapter3.html#cb479-2" aria-hidden="true" tabindex="-1"></a>list_2</span></code></pre></div>
<pre><code>## $Consultant
## $Consultant$Name
## [1] &quot;David Cameron&quot;
## 
## $Consultant$PhoneNum
## [1] &quot;+9562311855&quot;</code></pre>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="chapter3.html#cb481-1" aria-hidden="true" tabindex="-1"></a>list_data <span class="ot">&lt;-</span> <span class="fu">c</span>(list_data, list_2)</span>
<span id="cb481-2"><a href="chapter3.html#cb481-2" aria-hidden="true" tabindex="-1"></a>list_data</span></code></pre></div>
<pre><code>## $ClientName
## [1] &quot;John Doe&quot;
## 
## $IsActive
## [1] TRUE
## 
## $Services
## [1] &quot;credit&quot;     &quot;deposite&quot;   &quot;online-app&quot;
## 
## $Transactions
##   contract_id            datetime oper_type  amount
## 1       34387 2021-05-25 11:05:12         1 -187.72
## 2       69520 2021-05-25 11:07:14         0  307.99
## 3       34387 2021-05-25 11:08:02         0  993.38
## 4       69520 2021-05-25 11:12:45         0  597.78
## 5       34387 2021-05-25 11:47:00         1 -277.93
## 6       69520 2021-05-25 11:48:08         1 -874.21
## 
## $ClientId
## [1] 11125489656
## 
## $Consultant
## $Consultant$Name
## [1] &quot;David Cameron&quot;
## 
## $Consultant$PhoneNum
## [1] &quot;+9562311855&quot;</code></pre>
<p>With unlist() you can convert a list to a vector.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="chapter3.html#cb483-1" aria-hidden="true" tabindex="-1"></a>list_demo <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb483-2"><a href="chapter3.html#cb483-2" aria-hidden="true" tabindex="-1"></a>list_demo</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="chapter3.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(list_demo)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="chapter3.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(list_demo)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<pre><code>list_demo * 5 # error, you cannot use * for list</code></pre>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="chapter3.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(list_demo, <span class="cf">function</span>(c) c<span class="sc">*</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  5 10 15 20 25 30 35 40 45 50</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="chapter3.html#cb492-1" aria-hidden="true" tabindex="-1"></a>vector_demo <span class="ot">&lt;-</span> <span class="fu">unlist</span>(list_demo)</span>
<span id="cb492-2"><a href="chapter3.html#cb492-2" aria-hidden="true" tabindex="-1"></a>vector_demo</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="chapter3.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(vector_demo)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="chapter3.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(vector_demo)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="chapter3.html#cb498-1" aria-hidden="true" tabindex="-1"></a>vector_demo <span class="sc">*</span> <span class="dv">5</span> <span class="co"># now it works</span></span></code></pre></div>
<pre><code>##  [1]  5 10 15 20 25 30 35 40 45 50</code></pre>
<hr />
</div>
<div id="tasks-1" class="section level3" number="3.6.5">
<h3><span class="header-section-number">3.6.5</span> TASKS</h3>
<p><em>Task 1</em></p>
<p>Wrie a function that calculates sum, average, median, min, max of taken vector. Generate sample vector of 10 elements in <span class="math inline">\([1;100]\)</span>.</p>
<p><em>Solution</em></p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="chapter3.html#cb500-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">10</span>)</span>
<span id="cb500-2"><a href="chapter3.html#cb500-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>##  [1] 94 46 98 99 43 53 88 42 44 79</code></pre>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="chapter3.html#cb502-1" aria-hidden="true" tabindex="-1"></a>vector_info <span class="ot">&lt;-</span> <span class="cf">function</span>(vector) {</span>
<span id="cb502-2"><a href="chapter3.html#cb502-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb502-3"><a href="chapter3.html#cb502-3" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>Sum <span class="ot">&lt;-</span> <span class="fu">sum</span>(vector)</span>
<span id="cb502-4"><a href="chapter3.html#cb502-4" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>Mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(vector)</span>
<span id="cb502-5"><a href="chapter3.html#cb502-5" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>Median <span class="ot">&lt;-</span> <span class="fu">median</span>(vector)</span>
<span id="cb502-6"><a href="chapter3.html#cb502-6" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>Min <span class="ot">&lt;-</span> <span class="fu">min</span>(vector)</span>
<span id="cb502-7"><a href="chapter3.html#cb502-7" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>Max <span class="ot">&lt;-</span> <span class="fu">max</span>(vector)</span>
<span id="cb502-8"><a href="chapter3.html#cb502-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb502-9"><a href="chapter3.html#cb502-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb502-10"><a href="chapter3.html#cb502-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb502-11"><a href="chapter3.html#cb502-11" aria-hidden="true" tabindex="-1"></a><span class="fu">vector_info</span>(x)</span></code></pre></div>
<pre><code>## $Sum
## [1] 686
## 
## $Mean
## [1] 68.6
## 
## $Median
## [1] 66
## 
## $Min
## [1] 42
## 
## $Max
## [1] 99</code></pre>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="chapter3.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">vector_info</span>(x))</span></code></pre></div>
<pre><code>## [1] &quot;Sum&quot;    &quot;Mean&quot;   &quot;Median&quot; &quot;Min&quot;    &quot;Max&quot;</code></pre>
<hr />
</div>
</div>
<div id="apply-functions-family" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Apply functions family</h2>
<p>You can use a set of function for manipulating, accesing different data structures such as data.frame, list.</p>
<div id="the-apply-functions-family" class="section level3" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> The apply() functions family</h3>
<p>The apply() family pertains to the R base package and is populated with functions to manipulate slices of data from matrices, arrays, lists and dataframes in a repetitive way. These functions allow crossing the data in a number of ways and avoid explicit use of loop constructs. They act on an input list, matrix or array and apply a named function with one or several optional arguments.</p>
<p>The called function could be:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
An aggregating function, like for example the mean, or the sum (that return a number or scalar);</li>
<li><input type="checkbox" disabled="" checked="" />
Other transforming or subsetting functions; and</li>
<li><input type="checkbox" disabled="" checked="" />
Other vectorized functions, which yield more complex structures like lists, vectors, matrices, and arrays.</li>
</ul>
<p>The apply() functions form the basis of more complex combinations and helps to perform operations with very few lines of code. More specifically, the family is made up of the apply(), lapply(), sapply(), vapply(), mapply(), rapply(), and tapply() functions.</p>
<p>Using of any functions depends on the structure of the data that you want to operate on and the format of the output that you need.</p>
</div>
<div id="apply" class="section level3" number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> apply()</h3>
<p>apply() operates on arrays (2D arrays are matrices).</p>
<p>Syntax is next: <em>apply(X, MARGIN, FUN, …)</em>, where</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
X is an array or a matrix if the dimension of the array is 2;</li>
<li><input type="checkbox" disabled="" checked="" />
MARGIN is a variable defining how the function is applied: when MARGIN=1, it applies over rows, whereas with MARGIN=2, it works over columns. Note that when you use the construct MARGIN=c(1,2), it applies to both rows and columns; and</li>
<li><input type="checkbox" disabled="" checked="" />
FUN, which is the function that you want to apply to the data. It can be any R function, including a User Defined Function (UDF).</li>
</ul>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="chapter3.html#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a matrix</span></span>
<span id="cb506-2"><a href="chapter3.html#cb506-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-3"><a href="chapter3.html#cb506-3" aria-hidden="true" tabindex="-1"></a>matrix  <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">29</span>, <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb506-4"><a href="chapter3.html#cb506-4" aria-hidden="true" tabindex="-1"></a>matrix</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]   10   14   18   22   26
## [2,]   11   15   19   23   27
## [3,]   12   16   20   24   28
## [4,]   13   17   21   25   29</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="chapter3.html#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find sums by col</span></span>
<span id="cb508-2"><a href="chapter3.html#cb508-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(matrix, <span class="dv">2</span>, sum)</span></code></pre></div>
<pre><code>## [1]  46  62  78  94 110</code></pre>
<p>It your turn. TASK. Calculate average value of all rows:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="chapter3.html#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(matrix, <span class="dv">1</span>, mean)</span></code></pre></div>
<pre><code>## [1] 18 19 20 21</code></pre>
</div>
<div id="lapply" class="section level3" number="3.7.3">
<h3><span class="header-section-number">3.7.3</span> lapply()</h3>
<p>lapply() from apply() is:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
It can be used for other objects like dataframes, lists or vectors; and</li>
<li><input type="checkbox" disabled="" checked="" />
The output returned is a list (which explains the “l” in the function name), which has the same number of elements as the object passed to it.
?lapply to check params of fucntion:</li>
</ul>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="chapter3.html#cb512-1" aria-hidden="true" tabindex="-1"></a>?lapply</span></code></pre></div>
<p>Lets create list of data.frames:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="chapter3.html#cb513-1" aria-hidden="true" tabindex="-1"></a>df_a <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Value1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">Value2 =</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">105</span>)</span>
<span id="cb513-2"><a href="chapter3.html#cb513-2" aria-hidden="true" tabindex="-1"></a>df_a</span></code></pre></div>
<pre><code>##   Value1 Value2
## 1      1    101
## 2      2    102
## 3      3    103
## 4      4    104
## 5      5    105</code></pre>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="chapter3.html#cb515-1" aria-hidden="true" tabindex="-1"></a>df_b <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Value1 =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">Value2 =</span> <span class="dv">201</span><span class="sc">:</span><span class="dv">205</span>)</span>
<span id="cb515-2"><a href="chapter3.html#cb515-2" aria-hidden="true" tabindex="-1"></a>df_c <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Value1 =</span> <span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">Value2 =</span> <span class="dv">301</span><span class="sc">:</span><span class="dv">305</span>)</span>
<span id="cb515-3"><a href="chapter3.html#cb515-3" aria-hidden="true" tabindex="-1"></a>df_c</span></code></pre></div>
<pre><code>##   Value1 Value2
## 1     16    301
## 2     17    302
## 3     18    303
## 4     19    304
## 5     20    305</code></pre>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="chapter3.html#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(df_a<span class="sc">$</span>Value1, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 2
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] 4
## 
## [[5]]
## [1] 5</code></pre>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="chapter3.html#cb519-1" aria-hidden="true" tabindex="-1"></a>list_demo <span class="ot">&lt;-</span> <span class="fu">list</span>(df_a, df_b, df_c)</span>
<span id="cb519-2"><a href="chapter3.html#cb519-2" aria-hidden="true" tabindex="-1"></a>list_demo</span></code></pre></div>
<pre><code>## [[1]]
##   Value1 Value2
## 1      1    101
## 2      2    102
## 3      3    103
## 4      4    104
## 5      5    105
## 
## [[2]]
##   Value1 Value2
## 1     11    201
## 2     12    202
## 3     13    203
## 4     14    204
## 5     15    205
## 
## [[3]]
##   Value1 Value2
## 1     16    301
## 2     17    302
## 3     18    303
## 4     19    304
## 5     20    305</code></pre>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="chapter3.html#cb521-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lets select the 2nd row of each data frame</span></span>
<span id="cb521-2"><a href="chapter3.html#cb521-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb521-3"><a href="chapter3.html#cb521-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(list_demo, <span class="st">&quot;[&quot;</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [[1]]
##   Value2
## 1    101
## 2    102
## 3    103
## 4    104
## 5    105
## 
## [[2]]
##   Value2
## 1    201
## 2    202
## 3    203
## 4    204
## 5    205
## 
## [[3]]
##   Value2
## 1    301
## 2    302
## 3    303
## 4    304
## 5    305</code></pre>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="chapter3.html#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list_demo - data</span></span>
<span id="cb523-2"><a href="chapter3.html#cb523-2" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;[&quot; -  selection operator</span></span>
<span id="cb523-3"><a href="chapter3.html#cb523-3" aria-hidden="true" tabindex="-1"></a><span class="co"># row index</span></span>
<span id="cb523-4"><a href="chapter3.html#cb523-4" aria-hidden="true" tabindex="-1"></a><span class="co"># col index</span></span></code></pre></div>
<p>TASK. Its your turn. <em>Select all 1st rows of dataframes</em></p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="chapter3.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(list_demo, <span class="st">&quot;[&quot;</span>, <span class="dv">1</span>,)</span></code></pre></div>
<pre><code>## [[1]]
##   Value1 Value2
## 1      1    101
## 
## [[2]]
##   Value1 Value2
## 1     11    201
## 
## [[3]]
##   Value1 Value2
## 1     16    301</code></pre>
<p>TASK. Its your turn. Select all 1st elements (1st row, 1st col)</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="chapter3.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(list_demo, <span class="st">&quot;[&quot;</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 11
## 
## [[3]]
## [1] 16</code></pre>
<p>You can apply function to all elemetns. Let’s make some names in lowercase</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="chapter3.html#cb528-1" aria-hidden="true" tabindex="-1"></a>names_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jake&quot;</span>, <span class="st">&quot;Jacob&quot;</span>)</span>
<span id="cb528-2"><a href="chapter3.html#cb528-2" aria-hidden="true" tabindex="-1"></a>lower_names <span class="ot">&lt;-</span> <span class="fu">lapply</span>(names_list, tolower) </span>
<span id="cb528-3"><a href="chapter3.html#cb528-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lower_names)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
</div>
<div id="sapplay" class="section level3" number="3.7.4">
<h3><span class="header-section-number">3.7.4</span> sapplay()</h3>
<p>sapply() takes a list vector or dataframe as an input and returns the output in vector or matrix form. Lets use sapply() function in the previous example and check the result.</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="chapter3.html#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(names_list, tolower)</span></code></pre></div>
<pre><code>## [1] &quot;john&quot;  &quot;jane&quot;  &quot;jake&quot;  &quot;jacob&quot;</code></pre>
<p>It tries to simplify the output to the most elementary data structure that is possible. And indeed, sapply() is a ‘wrapper’ function for lapply().</p>
<p>Let’s try to get every 1st element of 2nd row from out list_demo:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="chapter3.html#cb532-1" aria-hidden="true" tabindex="-1"></a>list_demo</span></code></pre></div>
<pre><code>## [[1]]
##   Value1 Value2
## 1      1    101
## 2      2    102
## 3      3    103
## 4      4    104
## 5      5    105
## 
## [[2]]
##   Value1 Value2
## 1     11    201
## 2     12    202
## 3     13    203
## 4     14    204
## 5     15    205
## 
## [[3]]
##   Value1 Value2
## 1     16    301
## 2     17    302
## 3     18    303
## 4     19    304
## 5     20    305</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="chapter3.html#cb534-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">sapply</span>(list_demo, <span class="st">&quot;[&quot;</span>, <span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb534-2"><a href="chapter3.html#cb534-2" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## [1]  2 12 17</code></pre>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="chapter3.html#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(data)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="chapter3.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lest set simplify = FASLE</span></span>
<span id="cb538-2"><a href="chapter3.html#cb538-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">sapply</span>(list_demo, <span class="st">&quot;[&quot;</span>, <span class="dv">2</span>,<span class="dv">1</span>, <span class="at">simplify =</span>F)</span>
<span id="cb538-3"><a href="chapter3.html#cb538-3" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## [[1]]
## [1] 2
## 
## [[2]]
## [1] 12
## 
## [[3]]
## [1] 17</code></pre>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="chapter3.html#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(data)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
</div>
<div id="aggregate" class="section level3" number="3.7.5">
<h3><span class="header-section-number">3.7.5</span> aggregate()</h3>
<p>This function is from package stats. It often used for grouping data by some key. Its from apply family, but working in the same way. So, its good idea discuss it now.</p>
<p>Syntax for data.frame:</p>
<pre><code>aggregate(x,               # R object \
          by,              # List of variables (grouping elements) \
          FUN,             # Function to be applied for summary statistics\
          ...,             # Additional arguments to be passed to FUN\
          simplify = TRUE, # Whether to simplify results as much as possible or not\
          drop = TRUE)     # Whether to drop unused combinations of grouping values or not.</code></pre>
<p><em>Formula</em></p>
<pre><code>aggregate(formula,             # Input formula \
          data,                # List or data frame where the variables are stored \
          FUN,                 # Function to be applied for summary statistics \
          ...,                 # Additional arguments to be passed to FUN \
          subset,              # Observations to be used (optional) \
          na.action = na.omit) # How to deal with NA values`</code></pre>
<p>Lets use our credit_data from one of the previous tasks:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="chapter3.html#cb544-1" aria-hidden="true" tabindex="-1"></a>credit_data <span class="ot">&lt;-</span> ISLR<span class="sc">::</span>Credit</span>
<span id="cb544-2"><a href="chapter3.html#cb544-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(credit_data)</span></code></pre></div>
<pre><code>##   ID  Income Limit Rating Cards Age Education Gender Student Married Ethnicity
## 1  1  14.891  3606    283     2  34        11   Male      No     Yes Caucasian
## 2  2 106.025  6645    483     3  82        15 Female     Yes     Yes     Asian
## 3  3 104.593  7075    514     4  71        11   Male      No      No     Asian
## 4  4 148.924  9504    681     3  36        11 Female      No      No     Asian
## 5  5  55.882  4897    357     2  68        16   Male      No     Yes Caucasian
## 6  6  80.180  8047    569     4  77        10   Male      No      No Caucasian
##   Balance
## 1     333
## 2     903
## 3     580
## 4     964
## 5     331
## 6    1151</code></pre>
<p><em>TASK 1.</em> Calculate average Balance by Gender:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="chapter3.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lets use formula syntax</span></span>
<span id="cb546-2"><a href="chapter3.html#cb546-2" aria-hidden="true" tabindex="-1"></a>mean_age <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Age <span class="sc">~</span> Gender, <span class="at">data =</span> credit_data, mean)</span>
<span id="cb546-3"><a href="chapter3.html#cb546-3" aria-hidden="true" tabindex="-1"></a>mean_age </span></code></pre></div>
<pre><code>##   Gender      Age
## 1   Male 55.59585
## 2 Female 55.73430</code></pre>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="chapter3.html#cb548-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">names</span>(mean_age)</span>
<span id="cb548-2"><a href="chapter3.html#cb548-2" aria-hidden="true" tabindex="-1"></a>n[n <span class="sc">==</span> <span class="st">&quot;Age&quot;</span>] <span class="ot">=</span> <span class="st">&quot;Mean Age&quot;</span></span>
<span id="cb548-3"><a href="chapter3.html#cb548-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mean_age) <span class="ot">=</span> n</span>
<span id="cb548-4"><a href="chapter3.html#cb548-4" aria-hidden="true" tabindex="-1"></a>mean_age</span></code></pre></div>
<pre><code>##   Gender Mean Age
## 1   Male 55.59585
## 2 Female 55.73430</code></pre>
<p>TASK 2. Average Balance for Gender and Student status at the same time</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="chapter3.html#cb550-1" aria-hidden="true" tabindex="-1"></a>group_bal <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Age <span class="sc">~</span> Gender <span class="sc">+</span> Married, <span class="at">data =</span> credit_data, mean)</span>
<span id="cb550-2"><a href="chapter3.html#cb550-2" aria-hidden="true" tabindex="-1"></a>group_bal</span></code></pre></div>
<pre><code>##   Gender Married      Age
## 1   Male      No 57.13158
## 2 Female      No 57.36709
## 3   Male     Yes 54.59829
## 4 Female     Yes 54.72656</code></pre>
<p>Task 3. FOR STUDENTS. Try get aggregated average Income by Age. Order final dat.frame by age and make a plot().</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="chapter3.html#cb552-1" aria-hidden="true" tabindex="-1"></a>group_inc <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Income <span class="sc">~</span> Age <span class="sc">+</span> Gender, <span class="at">data =</span> credit_data, mean)</span>
<span id="cb552-2"><a href="chapter3.html#cb552-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(group_inc, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##    Age Gender   Income
## 1   24   Male 25.97400
## 2   25   Male 29.56700
## 3   26   Male 16.47900
## 4   27   Male 39.70500
## 5   28   Male 33.01700
## 6   29   Male 17.95850
## 7   30   Male 35.10467
## 8   31   Male 43.52567
## 9   32   Male 33.71150
## 10  33   Male 39.39733</code></pre>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="chapter3.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(group_inc<span class="sc">$</span>Gender)</span></code></pre></div>
<pre><code>## [1] &quot; Male&quot;  &quot;Female&quot;</code></pre>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="chapter3.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(group_inc<span class="sc">$</span>Gender) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)</span>
<span id="cb556-2"><a href="chapter3.html#cb556-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb556-3"><a href="chapter3.html#cb556-3" aria-hidden="true" tabindex="-1"></a>m_data <span class="ot">&lt;-</span> group_inc[group_inc<span class="sc">$</span>Gender <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>, ]</span>
<span id="cb556-4"><a href="chapter3.html#cb556-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(m_data)</span></code></pre></div>
<pre><code>## [1] 63</code></pre>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="chapter3.html#cb558-1" aria-hidden="true" tabindex="-1"></a>f_data <span class="ot">&lt;-</span> group_inc[group_inc<span class="sc">$</span>Gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>, ]</span>
<span id="cb558-2"><a href="chapter3.html#cb558-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(f_data)</span></code></pre></div>
<pre><code>## [1] 62</code></pre>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="chapter3.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(m_data, <span class="fu">plot</span>(Age, Income, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>))</span>
<span id="cb560-2"><a href="chapter3.html#cb560-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(f_data, <span class="fu">lines</span>(Age, Income, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col =</span><span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="03-chapter3_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="chapter3.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(group_inc$Age, group_inc$Income, type = &quot;b&quot;)</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="references" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> References</h2>
<ol style="list-style-type: decimal">
<li>The Comprehensive R Archive NetworkRcran: Url: <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></li>
<li>RStudio official website. Url: <a href="https://rstudio.com/" class="uri">https://rstudio.com/</a></li>
<li>Anaconda official website. Url: <a href="https://www.anaconda.com/" class="uri">https://www.anaconda.com/</a></li>
<li>Introduction to R. Datacamp interactive course. Url: <a href="https://www.datacamp.com/courses/free-introduction-to-r" class="uri">https://www.datacamp.com/courses/free-introduction-to-r</a></li>
<li>Quanargo. Introduction to R. Url: <a href="https://www.quantargo.com/courses/course-r-introduction" class="uri">https://www.quantargo.com/courses/course-r-introduction</a></li>
<li>R Coder Project. Begin your data science career with R language! Url: <a href="https://r-coder.com/" class="uri">https://r-coder.com/</a></li>
<li>R Core Team (2019). R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria.URL <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</li>
<li>A.B. Shipunov, EM Baldin, P.A. Volkova, VG Sufiyanov. Visual statistics. We use R! - M .: DMK Press, 2012. - 298 p .: ill.</li>
<li>An Introduction to R. URL: <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html</a></li>
<li>R programming. <a href="https://www.datamentor.io/r-programming" class="uri">https://www.datamentor.io/r-programming</a></li>
<li>Learn R. R Functions. <a href="https://www.w3schools.com/r/r_functions.asp" class="uri">https://www.w3schools.com/r/r_functions.asp</a></li>
<li>UC Business Analytics R Programming Guide. Managing Data Frames. <a href="http://uc-r.github.io/dataframes" class="uri">http://uc-r.github.io/dataframes</a></li>
<li>Learn R programming. R - Lists. <a href="https://www.tutorialspoint.com/r/r_lists.htm" class="uri">https://www.tutorialspoint.com/r/r_lists.htm</a></li>
<li>Tutorial on the R Apply Family by Carlo Fanara. <a href="https://www.datacamp.com/community/tutorials/r-tutorial-apply-family" class="uri">https://www.datacamp.com/community/tutorials/r-tutorial-apply-family</a></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r-science.pdf"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
